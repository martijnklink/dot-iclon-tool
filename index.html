<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOT → ICLON Beoordelingstool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            overflow: hidden;
        }
        
        .dot-score-btn {
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            font-weight: 600;
            font-size: 0.875rem;
            position: relative;
            min-height: 48px; /* Better touch target for mobile */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .dot-score-btn.score-0 {
            opacity: 0.6;
            font-size: 0.75rem;
        }
        .dot-score-btn:hover:not(.active) {
            transform: translateY(-2px);
            opacity: 0.9;
        }
        .dot-score-btn.score-0:hover:not(.active) {
            opacity: 0.8;
        }
        
        /* Custom grid for buttons with smaller NVT */
        .score-grid {
            display: grid;
            grid-template-columns: 0.6fr 1fr 1fr 1fr 1fr;
            gap: 0.5rem;
        }
        
        @media (max-width: 640px) {
            .score-grid {
                gap: 0.25rem;
            }
        }
        .dot-score-btn:hover:not(.active) {
            transform: translateY(-2px);
            opacity: 0.9;
        }
        .dot-score-btn.active {
            border-color: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 16px -4px rgba(0, 0, 0, 0.2);
        }
        .dot-score-btn.active::after {
            content: '✓';
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            font-size: 18px;
            font-weight: bold;
        }
        .score-0 { background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%); color: #64748b; }
        .score-1 { background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%); color: white; }
        .score-2 { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); color: white; }
        .score-3 { background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%); color: white; }
        .score-4 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        
        /* Mobile optimization for button grid */
        @media (max-width: 640px) {
            .dot-score-btn {
                font-size: 0.75rem;
                padding: 0.5rem 0.25rem;
                min-height: 44px;
            }
            .dot-score-btn.active::after {
                right: 2px;
                font-size: 12px;
            }
            
            /* Compact mobile headers */
            .category-header {
                min-height: auto;
                padding: 0.75rem !important;
            }
            .category-header h2 {
                font-size: 1rem !important;
                line-height: 1.2;
            }
            .category-header .text-4xl {
                font-size: 1.5rem;
            }
            .category-header .flex.items-center.gap-3 {
                gap: 0.5rem !important;
            }
            .category-avg-badge {
                font-size: 0.7rem;
                padding: 0.25rem 0.5rem;
            }
            .bulk-score-btn {
                font-size: 0.75rem;
                padding: 0.375rem 0.75rem;
            }
            
            /* Mobile dropdown positioning */
            .bulk-dropdown-content {
                position: fixed;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                min-width: 280px;
                max-width: 90vw;
                z-index: 1000;
            }
            
            /* Overlay for mobile dropdowns */
            .bulk-dropdown-content.show::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: -1;
            }
            
            /* Smaller progress bars on mobile */
            .progress-container {
                height: 3px;
                margin-top: 0.5rem;
            }
            
            /* Better mobile text sizing */
            body {
                font-size: 14px;
            }
            
            /* Compact cards on mobile */
            .card {
                margin-bottom: 0.75rem !important;
            }
            
            /* Mobile-friendly notes field */
            .notes-field {
                min-height: 60px;
                font-size: 14px;
            }
            
            /* Compact page header on mobile */
            .card.p-8 {
                padding: 1rem !important;
            }
            h1.text-5xl {
                font-size: 1.875rem !important;
            }
            .text-lg {
                font-size: 0.9rem !important;
            }
            
            /* Name fields compact */
            .grid.grid-cols-1.md\:grid-cols-2 {
                gap: 0.75rem !important;
            }
            label {
                font-size: 0.8rem !important;
                margin-bottom: 0.25rem !important;
            }
            input[type="text"] {
                padding: 0.5rem 0.75rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Compact buttons */
            button {
                padding: 0.5rem 1rem !important;
                font-size: 0.875rem !important;
            }
        }
        
        /* Tablet optimization */
        @media (min-width: 641px) and (max-width: 1023px) {
            .score-grid {
                gap: 0.375rem;
            }
            
            .category-header {
                padding: 1.25rem !important;
            }
        }
        
        .niveau-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            font-weight: 700;
            margin: 0 6px 6px 0;
            font-size: 1rem;
            transition: all 0.2s;
            cursor: default;
        }
        .niveau-badge:hover {
            transform: scale(1.1);
        }
        .niveau-1 { background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%); color: white; box-shadow: 0 4px 12px -2px rgba(255, 94, 98, 0.4); }
        .niveau-2 { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); color: white; box-shadow: 0 4px 12px -2px rgba(253, 160, 133, 0.4); }
        .niveau-3 { background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%); color: white; box-shadow: 0 4px 12px -2px rgba(86, 171, 47, 0.4); }
        .niveau-4 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; box-shadow: 0 4px 12px -2px rgba(118, 75, 162, 0.4); }
        .niveau-empty { background: #f1f5f9; color: #94a3b8; box-shadow: none; }
        
        /* Category average badge */
        .category-avg-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.875rem;
            box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        .category-avg-badge.avg-red {
            background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%);
            color: white;
        }
        .category-avg-badge.avg-orange {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            color: white;
        }
        .category-avg-badge.avg-green {
            background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%);
            color: white;
        }
        .category-avg-badge.avg-blue {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        /* Progress bar */
        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        .progress-bar {
            height: 100%;
            background: white;
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        /* Save feedback */
        .save-feedback {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px -5px rgba(16, 185, 129, 0.5);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 1000;
            animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s forwards;
        }
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
        
        /* Bulk scoring button */
        .bulk-score-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            font-size: 0.875rem;
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .bulk-score-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .bulk-dropdown {
            position: relative;
            display: inline-block;
        }
        .bulk-dropdown-content {
            display: none;
            position: absolute;
            background: white;
            min-width: 200px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            z-index: 100;
            overflow: hidden;
            top: 100%;
            margin-top: 0.5rem;
        }
        .bulk-dropdown-content.show {
            display: block;
            animation: fadeIn 0.2s ease;
        }
        .bulk-option {
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid #f1f5f9;
            font-weight: 600;
        }
        .bulk-option:last-child {
            border-bottom: none;
        }
        .bulk-option:hover {
            background: #f8fafc;
        }
        .bulk-option.opt-2 { color: #f59e0b; }
        .bulk-option.opt-3 { color: #10b981; }
        .bulk-option.opt-4 { color: #6366f1; }
        
        @media (max-width: 640px) {
            .category-avg-badge {
                font-size: 0.75rem;
                padding: 0.375rem 0.75rem;
            }
            .save-feedback {
                bottom: 1rem;
                right: 1rem;
                padding: 0.75rem 1rem;
                font-size: 0.875rem;
            }
            .bulk-score-btn {
                font-size: 0.75rem;
                padding: 0.375rem 0.75rem;
            }
        }
        
        .category-header {
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 80px; /* Better touch target */
        }
        .category-header:hover {
            opacity: 0.9;
        }
        .category-toggle-icon {
            transition: transform 0.3s;
            font-size: 1.5rem;
        }
        .category-header.open .category-toggle-icon {
            transform: rotate(90deg);
        }
        
        .category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .category-content.open {
            max-height: 5000px;
            transition: max-height 0.5s ease-in;
        }
        
        .iclon-details {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 1rem;
        }
        
        .iclon-toggle {
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #4f46e5;
            font-weight: 600;
            padding: 0.75rem;
            border-radius: 12px;
            background: white;
            margin-top: 0.75rem;
            min-height: 48px; /* Better touch target */
        }
        .iclon-toggle:hover {
            background: #f8fafc;
        }
        .iclon-toggle-icon {
            transition: transform 0.2s;
        }
        .iclon-toggle.open .iclon-toggle-icon {
            transform: rotate(90deg);
        }
        
        .niveau-desc {
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            border-left: 4px solid;
            background: white;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }
        .niveau-desc.n1 { border-color: #ff5e62; }
        .niveau-desc.n2 { border-color: #fda085; }
        .niveau-desc.n3 { border-color: #56ab2f; }
        .niveau-desc.n4 { border-color: #764ba2; }
        
        .niveau-desc-label {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .sticky-sidebar {
            position: sticky;
            top: 24px;
            max-height: calc(100vh - 48px);
            overflow-y: auto;
        }
        
        /* Mobile: sidebar not sticky */
        @media (max-width: 1023px) {
            .sticky-sidebar {
                position: relative;
                top: 0;
                max-height: none;
            }
        }
        
        .sticky-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        .sticky-sidebar::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        .sticky-sidebar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        
        .role-summary-card {
            background: linear-gradient(135deg, var(--role-color-start) 0%, var(--role-color-end) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }
        
        .notes-field {
            width: 100%;
            min-height: 80px;
            padding: 1rem;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            font-size: 0.875rem;
            transition: all 0.2s;
            resize: vertical;
        }
        .notes-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        button {
            transition: all 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        
        /* Scroll to top button */
        .scroll-to-top {
            position: fixed;
            bottom: 6rem;
            right: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            z-index: 999;
        }
        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        .scroll-to-top:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.6);
        }
        
        /* Quick nav */
        .quick-nav {
            position: fixed;
            left: 2rem;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border-radius: 16px;
            padding: 0.75rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: none;
        }
        .quick-nav.show {
            display: block;
        }
        .quick-nav-item {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.25rem;
        }
        .quick-nav-item:last-child {
            margin-bottom: 0;
        }
        .quick-nav-item:hover {
            transform: scale(1.1);
        }
        .quick-nav-item.active {
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }
        
        @media (max-width: 1280px) {
            .quick-nav {
                display: none !important;
            }
        }
        
        @media (max-width: 640px) {
            .scroll-to-top {
                bottom: 5rem;
                right: 1rem;
                width: 44px;
                height: 44px;
                font-size: 1.25rem;
            }
        }
        
        /* Mobile responsive text */
        @media (max-width: 640px) {
            h1 {
                font-size: 2rem !important;
            }
            h2 {
                font-size: 1.25rem !important;
            }
            .section-icon {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="max-w-7xl mx-auto p-6">
        <!-- Header -->
        <div class="card p-8 mb-6">
            <h1 class="text-5xl font-black bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-3">
                DOT → ICLON Tool
            </h1>
            <p class="text-gray-600 text-lg mb-6">Score DOT-stellingen en zie direct de ICLON-vertaling</p>
            
            <!-- Name fields -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-xl">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">👤 Naam geobserveerde (student)</label>
                    <input 
                        type="text" 
                        id="student-name" 
                        placeholder="Naam student..." 
                        class="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all"
                        onchange="saveNames()"
                    />
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">👁️ Naam observator (docent/begeleider)</label>
                    <input 
                        type="text" 
                        id="observer-name" 
                        placeholder="Naam observator..." 
                        class="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all"
                        onchange="saveNames()"
                    />
                </div>
            </div>
            
            <div class="flex gap-3">
                <button onclick="resetAll()" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl shadow-md font-semibold">
                    🔄 Reset alles
                </button>
                <button onclick="exportResults()" class="bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-3 rounded-xl shadow-md font-semibold">
                    📥 Exporteer PDF
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- DOT Scoring (2 cols) -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- 1. Klassenmanagement -->
<div class="card">
                    <div class="bg-gradient-to-r from-blue-500 to-cyan-500 p-6 category-header" onclick="toggleCategory('km')">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 flex-wrap mb-2">
                                <span class="text-4xl">📋</span>
                                <h2 class="text-2xl font-bold text-white">1. Klassenmanagement</h2>
                                <div id="avg-km"></div>
                            </div>
                            <div class="progress-container" id="progress-km">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3">
                                <div class="bulk-dropdown">
                                    <button class="bulk-score-btn" onclick="event.stopPropagation(); toggleBulkDropdown('km')">
                                        ⚡ Vul snel in
                                    </button>
                                    <div id="bulk-km" class="bulk-dropdown-content">
                                        <div class="bulk-option opt-2" onclick="bulkScore('km', 2)">Score alles als 2 (Matig)</div>
                                        <div class="bulk-option opt-3" onclick="bulkScore('km', 3)">Score alles als 3 (Gezien)</div>
                                        <div class="bulk-option opt-4" onclick="bulkScore('km', 4)">Score alles als 4 (Goed)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="category-toggle-icon text-white">▶</span>
                    </div>
                    <div id="category-km" class="category-content">
                        <div class="p-6 space-y-4">
                            <!-- 1.1 -->
                            <div>
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-blue-600">1.1</span> Weinig tijd verloren aan organisatorische aspecten (&lt;10%)</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('km1', 0)" data-item="km1" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('km1', 1)" data-item="km1" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('km1', 2)" data-item="km1" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('km1', 3)" data-item="km1" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('km1', 4)" data-item="km1" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('km1')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Sturen</span>
                                </div>
                                <div id="iclon-km1" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Het nemen van de leiding en het bieden van structuur lukt vaak niet.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Neemt de leiding en biedt structuur, incidenteel lukt dat niet.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Neemt de leiding en biedt structuur, maar moet zich daar wel voor inspannen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Het nemen van de leiding en het bieden van structuur kost geen inspanning. De leerlingen accepteren deze leiding als vanzelfsprekend.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 1.2 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-blue-600">1.2</span> Taalgebruik sloot aan bij het (ontwikkelings)niveau van de leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('km2', 0)" data-item="km2" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('km2', 1)" data-item="km2" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('km2', 2)" data-item="km2" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('km2', 3)" data-item="km2" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('km2', 4)" data-item="km2" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('km2')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Helpen & Begrijpen</span>
                                </div>
                                <div id="iclon-km2" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Toont zich in de omgang met leerlingen gespannen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Gaat op een vriendschappelijke manier met leerlingen om. Is nog teveel leerling met de leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Toont zorg en belangstelling voor de leerlingen en is benaderbaar.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Toont zorg en belangstelling voor de leerlingen. De docent is iemand die door leerlingen in vertrouwen wordt genomen.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 1.3 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-blue-600">1.3</span> Helder en bondig antwoord op vragen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('km3', 0)" data-item="km3" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('km3', 1)" data-item="km3" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('km3', 2)" data-item="km3" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('km3', 3)" data-item="km3" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('km3', 4)" data-item="km3" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('km3')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Behandelen leerstof</span>
                                </div>
                                <div id="iclon-km3" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Geeft geen betekenis aan vakbegrippen en legt geen verbanden.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Verbindt vakbegrippen met het eerder geleerde en buitenschoolse leefwereld van de leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Verbindt vakbegrippen met het eerder geleerde en buitenschoolse leerwereld. Is zich bewust van problemen die zich vaak voordoen bij het leren van vakinhouden.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Verbindt vakbegrippen met eerder geleerde en buitenschoolse leerwereld. Gaat in de les na in hoeverre zich bij de leerlingen daadwerkelijk misconcepties ontwikkelen en gebruikt meerdere strategieën om hier flexibel op in te spelen.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 1.4 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-blue-600">1.4</span> De leerlingen accepteerden mijn pedagogisch-didactische leiderschap</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('km4', 0)" data-item="km4" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('km4', 1)" data-item="km4" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('km4', 2)" data-item="km4" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('km4', 3)" data-item="km4" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('km4', 4)" data-item="km4" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('km4')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Sturen + Normen & regels</span>
                                </div>
                                <div id="iclon-km4" class="iclon-details" style="display: none;">
                                    <p class="font-semibold mb-2 text-indigo-700">Sturen:</p>
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Het nemen van de leiding en het bieden van structuur lukt vaak niet.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Neemt de leiding en biedt structuur, incidenteel lukt dat niet.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Neemt de leiding en biedt structuur, maar moet zich daar wel voor inspannen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Het nemen van de leiding en het bieden van structuur kost geen inspanning. De leerlingen accepteren deze leiding als vanzelfsprekend.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 1.5 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-blue-600">1.5</span> De leerlingen waren geïnteresseerd, stelden vragen of gaven hun mening</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('km5', 0)" data-item="km5" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('km5', 1)" data-item="km5" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('km5', 2)" data-item="km5" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('km5', 3)" data-item="km5" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('km5', 4)" data-item="km5" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('km5')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Ruimte bieden + Pedagoog - Veilige leeromgeving</span>
                                </div>
                                <div id="iclon-km5" class="iclon-details" style="display: none;">
                                    <p class="font-semibold mb-2 text-indigo-700">Regisseur - Ruimte bieden:</p>
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Leerlingen gaan hun eigen gang of leerlingen hebben juist helemaal geen ruimte voor inbreng.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Staat open voor suggesties van de leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Houdt rekening met de wensen en behoeften van leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Houdt rekening met de wensen en behoeften van leerlingen en geeft hen eigen verantwoordelijkheid.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aantekeningen -->
                            <div class="pt-6 border-t-2">
                                <label class="block font-bold text-gray-700 mb-2">📝 Aantekeningen</label>
                                <textarea 
                                    id="notes-km" 
                                    class="notes-field" 
                                    placeholder="Notities over klassenmanagement..."
                                    onchange="saveNotes('km')"
                                ></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Consistente Lesopbouw -->
                <div class="card">
                    <div class="bg-gradient-to-r from-green-500 to-emerald-500 p-6 category-header" onclick="toggleCategory('cl')">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 flex-wrap mb-2">
                                <span class="text-4xl">📚</span>
                                <h2 class="text-2xl font-bold text-white">2. Consistente Lesopbouw</h2>
                                <div id="avg-cl"></div>
                            </div>
                            <div class="progress-container" id="progress-cl">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3">
                                <div class="bulk-dropdown">
                                    <button class="bulk-score-btn" onclick="event.stopPropagation(); toggleBulkDropdown('cl')">
                                        ⚡ Vul snel in
                                    </button>
                                    <div id="bulk-cl" class="bulk-dropdown-content">
                                        <div class="bulk-option opt-2" onclick="bulkScore('cl', 2)">Score alles als 2 (Matig)</div>
                                        <div class="bulk-option opt-3" onclick="bulkScore('cl', 3)">Score alles als 3 (Gezien)</div>
                                        <div class="bulk-option opt-4" onclick="bulkScore('cl', 4)">Score alles als 4 (Goed)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="category-toggle-icon text-white">▶</span>
                    </div>
                    <div id="category-cl" class="category-content">
                        <div class="p-6 space-y-4">
                            <!-- 2.1 -->
                            <div>
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-green-600">2.1</span> Ik maakte het doel en de opbouw van de les duidelijk</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('cl1', 0)" data-item="cl1" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('cl1', 1)" data-item="cl1" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('cl1', 2)" data-item="cl1" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('cl1', 3)" data-item="cl1" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('cl1', 4)" data-item="cl1" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('cl1')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerdoelen</span>
                                </div>
                                <div id="iclon-cl1" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Heeft geen, onduidelijke of onhaalbare doelen voor leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Heeft voor de leerlingen haalbare doelen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Heeft voor de leerlingen haalbare en toetsbare doelen, en heeft daarbij voor ogen welke leeractiviteiten van leerlingen verwacht worden om die doelen te realiseren.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Heeft voor de leerlingen haalbare en toetsbare doelen en houdt daarbij rekening met verschillen tussen de leerlingen.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 2.2 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-green-600">2.2</span> Het doel van mijn les paste bij het niveau van de leerlingen, niet te makkelijk en niet te moeilijk</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('cl2', 0)" data-item="cl2" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('cl2', 1)" data-item="cl2" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('cl2', 2)" data-item="cl2" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('cl2', 3)" data-item="cl2" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('cl2', 4)" data-item="cl2" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('cl2')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerdoelen</span>
                                </div>
                                <div id="iclon-cl2" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Heeft geen, onduidelijke of onhaalbare doelen voor leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Heeft voor de leerlingen haalbare doelen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Heeft voor de leerlingen haalbare en toetsbare doelen, en heeft daarbij voor ogen welke leeractiviteiten van leerlingen verwacht worden om die doelen te realiseren.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Heeft voor de leerlingen haalbare en toetsbare doelen en houdt daarbij rekening met verschillen tussen de leerlingen.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 2.3 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-green-600">2.3</span> De door mij gekozen lesactiviteiten volgden elkaar logisch op</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('cl3', 0)" data-item="cl3" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('cl3', 1)" data-item="cl3" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('cl3', 2)" data-item="cl3" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('cl3', 3)" data-item="cl3" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('cl3', 4)" data-item="cl3" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('cl3')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-cl3" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 2.4 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-green-600">2.4</span> Voor de gekozen lesactiviteiten had ik voldoende tijd ingepland</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('cl4', 0)" data-item="cl4" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('cl4', 1)" data-item="cl4" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('cl4', 2)" data-item="cl4" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('cl4', 3)" data-item="cl4" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('cl4', 4)" data-item="cl4" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('cl4')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-cl4" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 2.5 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-green-600">2.5</span> Ik gebruikte werkvormen waardoor de leerlingen in staat waren het lesdoel te behalen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('cl5', 0)" data-item="cl5" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('cl5', 1)" data-item="cl5" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('cl5', 2)" data-item="cl5" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('cl5', 3)" data-item="cl5" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('cl5', 4)" data-item="cl5" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('cl5')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Werkvorm</span>
                                </div>
                                <div id="iclon-cl5" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Gebruikt een beperkt aantal werkvormen, ook als andere werkvormen meer voor de hand zouden liggen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Gebruikt werkvormen die in principe tot het realiseren van de leerdoelen kunnen leiden. De uitvoering is soms nog niet zoals beoogd.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Gebruikt uiteenlopende werkvormen die gegeven de doelen functioneel zijn en voert die uit zoals beoogd.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Heeft een breed repertoire aan werkvormen. Kan flexibel en snel van werkvorm wisselen indien de omstandigheden daar aanleiding toe geven.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 2.6 -->
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-green-600">2.6</span> Ik controleerde actief in hoeverre de leerlingen de beoogde leerdoelen gerealiseerd hadden</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('cl6', 0)" data-item="cl6" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('cl6', 1)" data-item="cl6" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('cl6', 2)" data-item="cl6" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('cl6', 3)" data-item="cl6" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('cl6', 4)" data-item="cl6" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('cl6')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-cl6" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan. Evalueert met geschikte instrumenten.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Kan zelf instrumenten ontwerpen.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Aantekeningen -->
                            <div class="pt-6 border-t-2">
                                <label class="block font-bold text-gray-700 mb-2">📝 Aantekeningen</label>
                                <textarea 
                                    id="notes-cl" 
                                    class="notes-field" 
                                    placeholder="Notities over consistente lesopbouw..."
                                    onchange="saveNotes('cl')"
                                ></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. Interactief werken aan leerstof -->
                <div class="card">
                    <div class="bg-gradient-to-r from-purple-500 to-pink-500 p-6 category-header" onclick="toggleCategory('iw')">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 flex-wrap mb-2">
                                <span class="text-4xl">💡</span>
                                <h2 class="text-2xl font-bold text-white">3. Interactief Werken aan Leerstof</h2>
                                <div id="avg-iw"></div>
                            </div>
                            <div class="progress-container" id="progress-iw">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3">
                                <div class="bulk-dropdown">
                                    <button class="bulk-score-btn" onclick="event.stopPropagation(); toggleBulkDropdown('iw')">
                                        ⚡ Vul snel in
                                    </button>
                                    <div id="bulk-iw" class="bulk-dropdown-content">
                                        <div class="bulk-option opt-2" onclick="bulkScore('iw', 2)">Score alles als 2 (Matig)</div>
                                        <div class="bulk-option opt-3" onclick="bulkScore('iw', 3)">Score alles als 3 (Gezien)</div>
                                        <div class="bulk-option opt-4" onclick="bulkScore('iw', 4)">Score alles als 4 (Goed)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="category-toggle-icon text-white">▶</span>
                    </div>
                    <div id="category-iw" class="category-content">
                        <div class="p-6 space-y-4">
                            <div>
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.1</span> Ik activeerde voorkennis en legde het verband met de nieuwe leerstof</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw1', 0)" data-item="iw1" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw1', 1)" data-item="iw1" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw1', 2)" data-item="iw1" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw1', 3)" data-item="iw1" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw1', 4)" data-item="iw1" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw1')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerstof</span>
                                </div>
                                <div id="iclon-iw1" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Beperkte vaardigheid in de leerstof.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Heeft de leerstof voldoende onder de knie om deze uit te leggen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Ziet verbanden tussen onderdelen van de leerstof en legt deze uit. Kan de leerstof aantrekkelijk presenteren.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Laat zien dat de leerstof boeit. Ziet en legt steeds nieuwe verbanden uit, zowel binnen het vak als met andere vakken.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.2</span> Ik deelde mijn vakinhoudelijke deskundigheid op een interactieve wijze</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw2', 0)" data-item="iw2" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw2', 1)" data-item="iw2" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw2', 2)" data-item="iw2" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw2', 3)" data-item="iw2" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw2', 4)" data-item="iw2" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw2')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerstof</span>
                                </div>
                                <div id="iclon-iw2" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Beperkte vaardigheid in de leerstof.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Heeft de leerstof voldoende onder de knie om deze uit te leggen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Ziet verbanden tussen onderdelen van de leerstof en legt deze uit. Kan de leerstof aantrekkelijk presenteren.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Laat zien dat de leerstof boeit. Ziet en legt steeds nieuwe verbanden uit, zowel binnen het vak als met andere vakken.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.3</span> Ik vatte de instructie in stappen regelmatig samen of liet dit door leerlingen doen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw3', 0)" data-item="iw3" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw3', 1)" data-item="iw3" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw3', 2)" data-item="iw3" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw3', 3)" data-item="iw3" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw3', 4)" data-item="iw3" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw3')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-iw3" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.4</span> Ik controleerde actief of de leerlingen mijn uitleg begrepen hadden</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw4', 0)" data-item="iw4" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw4', 1)" data-item="iw4" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw4', 2)" data-item="iw4" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw4', 3)" data-item="iw4" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw4', 4)" data-item="iw4" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw4')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-iw4" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.5</span> Ik maak gebruik van concrete voorbeelden die aansluiten bij de leefwereld van de leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw5', 0)" data-item="iw5" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw5', 1)" data-item="iw5" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw5', 2)" data-item="iw5" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw5', 3)" data-item="iw5" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw5', 4)" data-item="iw5" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw5')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerstof</span>
                                </div>
                                <div id="iclon-iw5" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Beperkte vaardigheid in de leerstof.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Heeft de leerstof voldoende onder de knie om deze uit te leggen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Ziet verbanden tussen onderdelen van de leerstof en legt deze uit. Kan de leerstof aantrekkelijk presenteren.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Laat zien dat de leerstof boeit. Ziet en legt steeds nieuwe verbanden uit, zowel binnen het vak als met andere vakken.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.6</span> Ik activeerde de leerlingen door goed te luisteren en open vragen te stellen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw6', 0)" data-item="iw6" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw6', 1)" data-item="iw6" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw6', 2)" data-item="iw6" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw6', 3)" data-item="iw6" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw6', 4)" data-item="iw6" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw6')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Helpen</span>
                                </div>
                                <div id="iclon-iw6" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Biedt onvoldoende hulp aan leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Biedt hulp aan leerlingen die daarom vragen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert wanneer leerlingen hulp nodig hebben en biedt die dan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Anticipeert op hulpbehoeften van leerlingen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-purple-600">3.7</span> Ik maakte helder waarom een antwoord van een leerling goed of fout was</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('iw7', 0)" data-item="iw7" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('iw7', 1)" data-item="iw7" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('iw7', 2)" data-item="iw7" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('iw7', 3)" data-item="iw7" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('iw7', 4)" data-item="iw7" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('iw7')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerstof</span>
                                </div>
                                <div id="iclon-iw7" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Beperkte vaardigheid in de leerstof.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Heeft de leerstof voldoende onder de knie om deze uit te leggen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Ziet verbanden tussen onderdelen van de leerstof en legt deze uit. Kan de leerstof aantrekkelijk presenteren.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Laat zien dat de leerstof boeit. Ziet en legt steeds nieuwe verbanden uit, zowel binnen het vak als met andere vakken.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-6 border-t-2">
                                <label class="block font-bold text-gray-700 mb-2">📝 Aantekeningen</label>
                                <textarea id="notes-iw" class="notes-field" placeholder="Notities over interactief werken..." onchange="saveNotes('iw')"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. Effectieve feedback -->
                <div class="card">
                    <div class="bg-gradient-to-r from-orange-500 to-red-500 p-6 category-header" onclick="toggleCategory('ef')">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 flex-wrap mb-2">
                                <span class="text-4xl">💬</span>
                                <h2 class="text-2xl font-bold text-white">4. Effectieve Feedback</h2>
                                <div id="avg-ef"></div>
                            </div>
                            <div class="progress-container" id="progress-ef">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3">
                                <div class="bulk-dropdown">
                                    <button class="bulk-score-btn" onclick="event.stopPropagation(); toggleBulkDropdown('ef')">
                                        ⚡ Vul snel in
                                    </button>
                                    <div id="bulk-ef" class="bulk-dropdown-content">
                                        <div class="bulk-option opt-2" onclick="bulkScore('ef', 2)">Score alles als 2 (Matig)</div>
                                        <div class="bulk-option opt-3" onclick="bulkScore('ef', 3)">Score alles als 3 (Gezien)</div>
                                        <div class="bulk-option opt-4" onclick="bulkScore('ef', 4)">Score alles als 4 (Goed)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="category-toggle-icon text-white">▶</span>
                    </div>
                    <div id="category-ef" class="category-content">
                        <div class="p-6 space-y-4">
                            <div>
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-orange-600">4.1</span> Ik communiceerde met leerlingen over de aanpak van de leertaak</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ef1', 0)" data-item="ef1" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ef1', 1)" data-item="ef1" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ef1', 2)" data-item="ef1" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ef1', 3)" data-item="ef1" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ef1', 4)" data-item="ef1" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ef1')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Helpen</span>
                                </div>
                                <div id="iclon-ef1" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Biedt onvoldoende hulp aan leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Biedt hulp aan leerlingen die daarom vragen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert wanneer leerlingen hulp nodig hebben en biedt die dan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Anticipeert op hulpbehoeften van leerlingen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-orange-600">4.2</span> Ik vroeg leerlingen zelf na te denken over de aanpak waardoor zij de leertaak meer planmatig benaderden</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ef2', 0)" data-item="ef2" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ef2', 1)" data-item="ef2" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ef2', 2)" data-item="ef2" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ef2', 3)" data-item="ef2" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ef2', 4)" data-item="ef2" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ef2')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Ruimte geven</span>
                                </div>
                                <div id="iclon-ef2" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Geeft leerlingen onvoldoende ruimte.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Geeft leerlingen ruimte voor eigen inbreng.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Geeft leerlingen ruimte voor eigen inbreng en gebruikt die inbreng.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Stimuleert leerlingen actief om eigen inbreng te leveren en benut die in de les.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-orange-600">4.3</span> Mijn feedback was gericht op de vooruitgang van de leerling</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ef3', 0)" data-item="ef3" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ef3', 1)" data-item="ef3" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ef3', 2)" data-item="ef3" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ef3', 3)" data-item="ef3" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ef3', 4)" data-item="ef3" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ef3')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-ef3" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-orange-600">4.4</span> Ik gaf leerlingen positieve complimenten over hun werk</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ef4', 0)" data-item="ef4" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ef4', 1)" data-item="ef4" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ef4', 2)" data-item="ef4" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ef4', 3)" data-item="ef4" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ef4', 4)" data-item="ef4" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ef4')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Helpen</span>
                                </div>
                                <div id="iclon-ef4" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Biedt onvoldoende hulp aan leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Biedt hulp aan leerlingen die daarom vragen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert wanneer leerlingen hulp nodig hebben en biedt die dan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Anticipeert op hulpbehoeften van leerlingen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-orange-600">4.5</span> Ik legde leerlingen uit wat ze moesten leren om hun werk te verbeteren</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ef5', 0)" data-item="ef5" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ef5', 1)" data-item="ef5" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ef5', 2)" data-item="ef5" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ef5', 3)" data-item="ef5" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ef5', 4)" data-item="ef5" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ef5')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-ef5" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-6 border-t-2">
                                <label class="block font-bold text-gray-700 mb-2">📝 Aantekeningen</label>
                                <textarea id="notes-ef" class="notes-field" placeholder="Notities over effectieve feedback..." onchange="saveNotes('ef')"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 5. Differentiatie -->
                <div class="card">
                    <div class="bg-gradient-to-r from-yellow-500 to-amber-500 p-6 category-header" onclick="toggleCategory('diff')">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 flex-wrap mb-2">
                                <span class="text-4xl">🎯</span>
                                <h2 class="text-2xl font-bold text-white">5. Differentiatie</h2>
                                <div id="avg-diff"></div>
                            </div>
                            <div class="progress-container" id="progress-diff">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3">
                                <div class="bulk-dropdown">
                                    <button class="bulk-score-btn" onclick="event.stopPropagation(); toggleBulkDropdown('diff')">
                                        ⚡ Vul snel in
                                    </button>
                                    <div id="bulk-diff" class="bulk-dropdown-content">
                                        <div class="bulk-option opt-2" onclick="bulkScore('diff', 2)">Score alles als 2 (Matig)</div>
                                        <div class="bulk-option opt-3" onclick="bulkScore('diff', 3)">Score alles als 3 (Gezien)</div>
                                        <div class="bulk-option opt-4" onclick="bulkScore('diff', 4)">Score alles als 4 (Goed)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="category-toggle-icon text-white">▶</span>
                    </div>
                    <div id="category-diff" class="category-content">
                        <div class="p-6 space-y-4">
                            <div>
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-yellow-600">5.1</span> Ik had mijn les voorbereid op basis van informatie over de leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('diff1', 0)" data-item="diff1" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('diff1', 1)" data-item="diff1" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('diff1', 2)" data-item="diff1" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('diff1', 3)" data-item="diff1" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('diff1', 4)" data-item="diff1" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('diff1')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Omgaan met verschillen</span>
                                </div>
                                <div id="iclon-diff1" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Gaat niet of nauwelijks om met verschillen tussen leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Signaleert verschillen tussen leerlingen en houdt daar rekening mee.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert verschillen tussen leerlingen en past de aanpak daarop aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Benut verschillen tussen leerlingen om het leren van alle leerlingen te bevorderen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-yellow-600">5.2</span> Leerlingen werkten op eigen niveau met individuele leerdoelen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('diff2', 0)" data-item="diff2" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('diff2', 1)" data-item="diff2" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('diff2', 2)" data-item="diff2" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('diff2', 3)" data-item="diff2" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('diff2', 4)" data-item="diff2" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('diff2')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Omgaan met verschillen</span>
                                </div>
                                <div id="iclon-diff2" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Gaat niet of nauwelijks om met verschillen tussen leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Signaleert verschillen tussen leerlingen en houdt daar rekening mee.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert verschillen tussen leerlingen en past de aanpak daarop aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Benut verschillen tussen leerlingen om het leren van alle leerlingen te bevorderen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-yellow-600">5.3</span> Ik geef leerlingen die dat nodig hebben extra of aanvullende instructie of ondersteuning zodat iedere leerling in staat wordt gesteld de leerdoelen te behalen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('diff3', 0)" data-item="diff3" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('diff3', 1)" data-item="diff3" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('diff3', 2)" data-item="diff3" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('diff3', 3)" data-item="diff3" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('diff3', 4)" data-item="diff3" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('diff3')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-diff3" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-yellow-600">5.4</span> Ik gaf leerlingen die ondersteuning nodig hadden meer en extra oefenmogelijkheden</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('diff4', 0)" data-item="diff4" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('diff4', 1)" data-item="diff4" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('diff4', 2)" data-item="diff4" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('diff4', 3)" data-item="diff4" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('diff4', 4)" data-item="diff4" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('diff4')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-diff4" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-yellow-600">5.5</span> Ik zette leerlingen die minder instructie nodig hadden, alvast aan het werk</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('diff5', 0)" data-item="diff5" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('diff5', 1)" data-item="diff5" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('diff5', 2)" data-item="diff5" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('diff5', 3)" data-item="diff5" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('diff5', 4)" data-item="diff5" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('diff5')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Vakdidacticus - Leerproces</span>
                                </div>
                                <div id="iclon-diff5" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen van leerlingen onvoldoende. Evalueert niet of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die in principe tot het realiseren van de leerdoelen kunnen leiden. Evalueert of leerprocessen tot het realiseren van leerdoelen hebben geleid.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen die tot het realiseren van de leerdoelen kunnen leiden. Signaleert wanneer dat niet lukt en past werkwijze dan aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Organiseert leerprocessen en bouwt activiteiten in om vroeg te signaleren wanneer dat dreigt niet te lukken. Past snel en adequaat aan.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-yellow-600">5.6</span> Ik gaf leerlingen die meer uitdaging nodig hadden de mogelijkheid om basisstof compacter te verwerken en met verrijkingsstof aan de slag te gaan</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('diff6', 0)" data-item="diff6" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('diff6', 1)" data-item="diff6" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('diff6', 2)" data-item="diff6" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('diff6', 3)" data-item="diff6" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('diff6', 4)" data-item="diff6" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('diff6')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Omgaan met verschillen</span>
                                </div>
                                <div id="iclon-diff6" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Gaat niet of nauwelijks om met verschillen tussen leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Signaleert verschillen tussen leerlingen en houdt daar rekening mee.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert verschillen tussen leerlingen en past de aanpak daarop aan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Benut verschillen tussen leerlingen om het leren van alle leerlingen te bevorderen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-6 border-t-2">
                                <label class="block font-bold text-gray-700 mb-2">📝 Aantekeningen</label>
                                <textarea id="notes-diff" class="notes-field" placeholder="Notities over differentiatie..." onchange="saveNotes('diff')"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 6. Pedagogisch handelen -->
                <div class="card">
                    <div class="bg-gradient-to-r from-teal-500 to-cyan-500 p-6 category-header" onclick="toggleCategory('ph')">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 flex-wrap mb-2">
                                <span class="text-4xl">🤝</span>
                                <h2 class="text-2xl font-bold text-white">6. Pedagogisch Handelen</h2>
                                <div id="avg-ph"></div>
                            </div>
                            <div class="progress-container" id="progress-ph">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3">
                                <div class="bulk-dropdown">
                                    <button class="bulk-score-btn" onclick="event.stopPropagation(); toggleBulkDropdown('ph')">
                                        ⚡ Vul snel in
                                    </button>
                                    <div id="bulk-ph" class="bulk-dropdown-content">
                                        <div class="bulk-option opt-2" onclick="bulkScore('ph', 2)">Score alles als 2 (Matig)</div>
                                        <div class="bulk-option opt-3" onclick="bulkScore('ph', 3)">Score alles als 3 (Gezien)</div>
                                        <div class="bulk-option opt-4" onclick="bulkScore('ph', 4)">Score alles als 4 (Goed)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <span class="category-toggle-icon text-white">▶</span>
                    </div>
                    <div id="category-ph" class="category-content">
                        <div class="p-6 space-y-4">
                            <div>
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-teal-600">6.1</span> Ik toonde positieve en persoonlijke aandacht voor de leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ph1', 0)" data-item="ph1" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ph1', 1)" data-item="ph1" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ph1', 2)" data-item="ph1" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ph1', 3)" data-item="ph1" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ph1', 4)" data-item="ph1" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ph1')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Regisseur - Helpen</span>
                                </div>
                                <div id="iclon-ph1" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Biedt onvoldoende hulp aan leerlingen.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Biedt hulp aan leerlingen die daarom vragen.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Signaleert wanneer leerlingen hulp nodig hebben en biedt die dan.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Anticipeert op hulpbehoeften van leerlingen.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-teal-600">6.2</span> Ik zorgde voor een respectvolle omgang tussen de leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ph2', 0)" data-item="ph2" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ph2', 1)" data-item="ph2" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ph2', 2)" data-item="ph2" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ph2', 3)" data-item="ph2" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ph2', 4)" data-item="ph2" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ph2')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Veilig klimaat</span>
                                </div>
                                <div id="iclon-ph2" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Creëert onvoldoende een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat en gaat adequaat om met leerlingen die de veiligheid bedreigen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Maakt de groep medeverantwoordelijk voor het veilige klimaat.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-teal-600">6.3</span> Ik behandelde alle leerlingen als gelijkwaardig</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ph3', 0)" data-item="ph3" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ph3', 1)" data-item="ph3" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ph3', 2)" data-item="ph3" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ph3', 3)" data-item="ph3" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ph3', 4)" data-item="ph3" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ph3')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Veilig klimaat</span>
                                </div>
                                <div id="iclon-ph3" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Creëert onvoldoende een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat en gaat adequaat om met leerlingen die de veiligheid bedreigen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Maakt de groep medeverantwoordelijk voor het veilige klimaat.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-teal-600">6.4</span> Ik zorgde voor een klimaat waarin alle leerlingen konden werken</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ph4', 0)" data-item="ph4" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ph4', 1)" data-item="ph4" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ph4', 2)" data-item="ph4" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ph4', 3)" data-item="ph4" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ph4', 4)" data-item="ph4" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ph4')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Veilig klimaat</span>
                                </div>
                                <div id="iclon-ph4" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Creëert onvoldoende een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat en gaat adequaat om met leerlingen die de veiligheid bedreigen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Maakt de groep medeverantwoordelijk voor het veilige klimaat.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-teal-600">6.5</span> Ik formuleerde positieve verwachtingen over de inzet en prestaties van de leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ph5', 0)" data-item="ph5" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ph5', 1)" data-item="ph5" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ph5', 2)" data-item="ph5" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ph5', 3)" data-item="ph5" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ph5', 4)" data-item="ph5" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ph5')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Veilig klimaat</span>
                                </div>
                                <div id="iclon-ph5" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Creëert onvoldoende een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat en gaat adequaat om met leerlingen die de veiligheid bedreigen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Maakt de groep medeverantwoordelijk voor het veilige klimaat.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t">
                                <p class="mb-3 font-medium text-gray-700"><span class="font-bold text-teal-600">6.6</span> Ik stelde realistische eisen aan de inzet en prestaties van mijn leerlingen</p>
                                <div class="score-grid">
                                    <button class="dot-score-btn score-0 px-4 py-3 rounded-xl" onclick="setScore('ph6', 0)" data-item="ph6" data-score="0">NVT</button>
                                    <button class="dot-score-btn score-1 px-4 py-3 rounded-xl" onclick="setScore('ph6', 1)" data-item="ph6" data-score="1">Niet</button>
                                    <button class="dot-score-btn score-2 px-4 py-3 rounded-xl" onclick="setScore('ph6', 2)" data-item="ph6" data-score="2">Matig</button>
                                    <button class="dot-score-btn score-3 px-4 py-3 rounded-xl" onclick="setScore('ph6', 3)" data-item="ph6" data-score="3">Gezien</button>
                                    <button class="dot-score-btn score-4 px-4 py-3 rounded-xl" onclick="setScore('ph6', 4)" data-item="ph6" data-score="4">Goed</button>
                                </div>
                                <div class="iclon-toggle" onclick="toggleIclon('ph6')">
                                    <span class="iclon-toggle-icon">▶</span>
                                    <span>ICLON: Pedagoog - Veilig klimaat</span>
                                </div>
                                <div id="iclon-ph6" class="iclon-details" style="display: none;">
                                    <div class="niveau-desc n1">
                                        <div class="niveau-desc-label" style="color: #ff5e62;">Niveau 1</div>
                                        <p class="text-sm text-gray-700">Creëert onvoldoende een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n2">
                                        <div class="niveau-desc-label" style="color: #d97706;">Niveau 2</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat.</p>
                                    </div>
                                    <div class="niveau-desc n3">
                                        <div class="niveau-desc-label" style="color: #16a34a;">Niveau 3</div>
                                        <p class="text-sm text-gray-700">Creëert een veilig klimaat en gaat adequaat om met leerlingen die de veiligheid bedreigen.</p>
                                    </div>
                                    <div class="niveau-desc n4">
                                        <div class="niveau-desc-label" style="color: #764ba2;">Niveau 4</div>
                                        <p class="text-sm text-gray-700">Maakt de groep medeverantwoordelijk voor het veilige klimaat.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-6 border-t-2">
                                <label class="block font-bold text-gray-700 mb-2">📝 Aantekeningen</label>
                                <textarea id="notes-ph" class="notes-field" placeholder="Notities over pedagogisch handelen..." onchange="saveNotes('ph')"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- ICLON Suggesties (1 col) -->
            <div class="sticky-sidebar">
                <div class="card p-6">
                    <h2 class="text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-4">
                        ICLON Suggesties
                    </h2>
                    <p class="text-sm text-gray-600 mb-6">Op basis van je DOT-scores</p>
                    
                    <div id="suggestions-content" class="space-y-4">
                        <div class="text-center text-gray-500 py-12">
                            <div class="text-6xl mb-4">📊</div>
                            <p>Score eerste DOT-stellingen →</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Item labels voor export
        const itemLabels = {
            'km1': '1.1 Weinig tijd verloren aan organisatorische aspecten',
            'km2': '1.2 Taalgebruik sloot aan bij ontwikkelingsniveau',
            'km3': '1.3 Helder en bondig antwoord op vragen',
            'km4': '1.4 Leerlingen accepteerden mijn leiderschap',
            'km5': '1.5 Leerlingen waren geïnteresseerd, stelden vragen',
            'cl1': '2.1 Doel en opbouw van de les duidelijk',
            'cl2': '2.2 Doel paste bij niveau, niet te makkelijk en niet te moeilijk',
            'cl3': '2.3 Lesactiviteiten volgden logisch op',
            'cl4': '2.4 Voldoende tijd ingepland',
            'cl5': '2.5 Werkvormen om lesdoel te behalen',
            'cl6': '2.6 Controleerde actief of leerdoelen gerealiseerd',
            'iw1': '3.1 Activeerde voorkennis en legde het verband',
            'iw2': '3.2 Deelde deskundigheid interactief',
            'iw3': '3.3 Vatte instructie regelmatig samen of liet dit door leerlingen doen',
            'iw4': '3.4 Controleerde actief of uitleg begrepen',
            'iw5': '3.5 Concrete voorbeelden uit de leefwereld',
            'iw6': '3.6 Activeerde door luisteren en open vragen',
            'iw7': '3.7 Helder waarom antwoord goed/fout was',
            'ef1': '4.1 Communiceerde over aanpak leertaak',
            'ef2': '4.2 Vroeg leerlingen zelf na te denken waardoor zij meer planmatig benaderden',
            'ef3': '4.3 Feedback gericht op vooruitgang',
            'ef4': '4.4 Gaf complimenten over hun werk',
            'ef5': '4.5 Legde uit wat te leren voor verbetering',
            'diff1': '5.1 Les voorbereid op basis van info over leerlingen',
            'diff2': '5.2 Leerlingen op eigen niveau met individuele doelen',
            'diff3': '5.3 Extra/aanvullende instructie of ondersteuning',
            'diff4': '5.4 Meer en extra oefenmogelijkheden',
            'diff5': '5.5 Leerlingen met minder instructie alvast aan het werk',
            'diff6': '5.6 Basisstof compacter + verrijkingsstof',
            'ph1': '6.1 Toonde positieve en persoonlijke aandacht',
            'ph2': '6.2 Zorgde voor respectvolle omgang',
            'ph3': '6.3 Behandelde alle leerlingen gelijkwaardig',
            'ph4': '6.4 Klimaat waarin alle leerlingen konden werken',
            'ph5': '6.5 Formuleerde positieve verwachtingen',
            'ph6': '6.6 Stelde realistische eisen aan inzet en prestaties'
        };
        
        const categoryNames = {
            'km': '1. Klassenmanagement',
            'cl': '2. Consistente Lesopbouw',
            'iw': '3. Interactief Werken aan Leerstof',
            'ef': '4. Effectieve Feedback',
            'diff': '5. Differentiatie',
            'ph': '6. Pedagogisch Handelen'
        };
        
        // Mapping van DOT items naar ICLON criteria
        const mapping = {
            'km1': ['reg-sturen', 'reg-normen'],
            'km2': ['reg-helpen', 'vak-leerstof'],
            'km3': ['vak-leerstof', 'reg-helpen'],
            'km4': ['reg-sturen', 'reg-normen'],
            'km5': ['reg-ruimte', 'ped-veilig', 'vak-leerstof', 'ped-waarden'],
            'cl1': ['vak-leerdoelen'],
            'cl2': ['vak-leerdoelen', 'ped-verschillen'],
            'cl3': ['vak-leerproces'],
            'cl4': ['vak-leerproces'],
            'cl5': ['vak-werkvorm'],
            'cl6': ['vak-leerproces', 'vak-leerdoelen'],
            'iw1': ['vak-leerstof'],
            'iw2': ['vak-leerstof', 'vak-werkvorm', 'reg-ruimte', 'ped-waarden'],
            'iw3': ['vak-leerproces'],
            'iw4': ['vak-leerproces'],
            'iw5': ['vak-leerstof'],
            'iw6': ['reg-helpen', 'vak-werkvorm', 'reg-ruimte', 'ped-verschillen', 'ped-waarden'],
            'iw7': ['vak-leerstof', 'vak-leerproces'],
            'ef1': ['reg-helpen', 'vak-leerproces'],
            'ef2': ['reg-ruimte', 'vak-leerproces', 'ped-waarden'],
            'ef3': ['vak-leerproces'],
            'ef4': ['reg-helpen', 'ped-veilig'],
            'ef5': ['vak-leerproces'],
            'diff1': ['vak-leerdoelen', 'ped-verschillen', 'ped-identiteit'],
            'diff2': ['vak-leerdoelen', 'ped-verschillen', 'ped-identiteit'],
            'diff3': ['vak-leerproces', 'ped-verschillen', 'reg-helpen'],
            'diff4': ['vak-leerproces', 'ped-verschillen', 'reg-helpen'],
            'diff5': ['vak-leerproces', 'ped-verschillen', 'reg-sturen'],
            'diff6': ['vak-leerdoelen', 'ped-verschillen'],
            'ph1': ['reg-helpen', 'ped-veilig', 'ped-identiteit'],
            'ph2': ['reg-normen', 'ped-veilig'],
            'ph3': ['ped-veilig', 'ped-verschillen', 'ped-waarden', 'ped-identiteit'],
            'ph4': ['reg-sturen', 'ped-veilig'],
            'ph5': ['ped-veilig', 'ped-waarden'],
            'ph6': ['vak-leerdoelen', 'ped-veilig', 'reg-normen']
        };

        const criteriaNames = {
            'reg-sturen': 'Regisseur: Sturen',
            'reg-helpen': 'Regisseur: Helpen & Begrijpen',
            'reg-ruimte': 'Regisseur: Ruimte bieden',
            'reg-normen': 'Regisseur: Normen & regels',
            'vak-leerdoelen': 'Vakdidacticus: Leerdoelen',
            'vak-leerstof': 'Vakdidacticus: Behandelen leerstof',
            'vak-leerproces': 'Vakdidacticus: Leerproces',
            'vak-werkvorm': 'Vakdidacticus: Werkvorm',
            'ped-verschillen': 'Pedagoog: Verschillen',
            'ped-veilig': 'Pedagoog: Veilige leeromgeving'
        };

        const scores = {};
        const notes = {};
        
        // Category item mappings
        const categoryItems = {
            'km': ['km1', 'km2', 'km3', 'km4', 'km5'],
            'cl': ['cl1', 'cl2', 'cl3', 'cl4', 'cl5', 'cl6'],
            'iw': ['iw1', 'iw2', 'iw3', 'iw4', 'iw5', 'iw6', 'iw7'],
            'ef': ['ef1', 'ef2', 'ef3', 'ef4', 'ef5'],
            'diff': ['diff1', 'diff2', 'diff3', 'diff4', 'diff5', 'diff6'],
            'ph': ['ph1', 'ph2', 'ph3', 'ph4', 'ph5', 'ph6']
        };

        // Load saved data from localStorage
        function loadSavedData() {
            const savedScores = localStorage.getItem('dotScores');
            const savedNotes = localStorage.getItem('dotNotes');
            const savedStudentName = localStorage.getItem('dotStudentName');
            const savedObserverName = localStorage.getItem('dotObserverName');
            
            if (savedScores) {
                Object.assign(scores, JSON.parse(savedScores));
                // Restore button states
                for (const [item, score] of Object.entries(scores)) {
                    const btn = document.querySelector(`[data-item="${item}"][data-score="${score}"]`);
                    if (btn) btn.classList.add('active');
                }
                updateCategoryAverages();
                updateSuggestions();
            }
            
            if (savedNotes) {
                Object.assign(notes, JSON.parse(savedNotes));
                // Restore notes
                for (const [category, note] of Object.entries(notes)) {
                    const textarea = document.getElementById('notes-' + category);
                    if (textarea) textarea.value = note;
                }
            }
            
            // Restore names
            const studentNameInput = document.getElementById('student-name');
            const observerNameInput = document.getElementById('observer-name');
            if (savedStudentName && studentNameInput) studentNameInput.value = savedStudentName;
            if (savedObserverName && observerNameInput) observerNameInput.value = savedObserverName;
        }

        function toggleCategory(category) {
            const content = document.getElementById('category-' + category);
            const header = event.currentTarget;
            
            if (content.classList.contains('open')) {
                content.classList.remove('open');
                header.classList.remove('open');
            } else {
                content.classList.add('open');
                header.classList.add('open');
            }
        }

        function toggleIclon(id) {
            const element = document.getElementById('iclon-' + id);
            const toggle = event.currentTarget;
            
            if (element.style.display === 'none') {
                element.style.display = 'block';
                toggle.classList.add('open');
            } else {
                element.style.display = 'none';
                toggle.classList.remove('open');
            }
        }

        function setScore(item, score) {
            document.querySelectorAll(`[data-item="${item}"]`).forEach(btn => {
                btn.classList.remove('active');
            });
            
            const targetBtn = document.querySelector(`[data-item="${item}"][data-score="${score}"]`);
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
            
            scores[item] = score;
            localStorage.setItem('dotScores', JSON.stringify(scores));
            updateCategoryAverages();
            updateSuggestions();
            showSaveFeedback();
        }
        
        function updateCategoryAverages() {
            for (const [category, items] of Object.entries(categoryItems)) {
                // Filter out score 0 (NVT) and undefined scores
                const categoryScores = items
                    .map(item => scores[item])
                    .filter(s => s !== undefined && s !== 0);
                
                const avgElement = document.getElementById('avg-' + category);
                const progressBar = document.querySelector(`#progress-${category} .progress-bar`);
                
                if (!avgElement) return; // Skip if element not found
                
                // Count total filled items (including NVT)
                const filledCount = items.filter(item => scores[item] !== undefined).length;
                const percentage = (filledCount / items.length) * 100;
                
                if (progressBar) {
                    progressBar.style.width = percentage + '%';
                }
                
                if (categoryScores.length > 0) {
                    const avg = categoryScores.reduce((a, b) => a + b, 0) / categoryScores.length;
                    
                    // Determine color based on average
                    let colorClass = '';
                    if (avg < 1.5) {
                        colorClass = 'avg-red';
                    } else if (avg < 2.5) {
                        colorClass = 'avg-orange';
                    } else if (avg < 3.5) {
                        colorClass = 'avg-green';
                    } else {
                        colorClass = 'avg-blue';
                    }
                    
                    avgElement.innerHTML = `<span class="category-avg-badge ${colorClass}">Gem: ${avg.toFixed(1)} • ${filledCount}/${items.length}</span>`;
                } else if (filledCount > 0) {
                    // Only NVT scores
                    avgElement.innerHTML = `<span class="category-avg-badge" style="background: #94a3b8; color: white;">NVT • ${filledCount}/${items.length}</span>`;
                } else {
                    avgElement.innerHTML = '';
                }
            }
        }
        
        function showSaveFeedback() {
            // Remove existing feedback if any
            const existing = document.querySelector('.save-feedback');
            if (existing) existing.remove();
            
            // Create new feedback
            const feedback = document.createElement('div');
            feedback.className = 'save-feedback';
            feedback.innerHTML = '<span style="font-size: 1.25rem;">✓</span> Opgeslagen';
            document.body.appendChild(feedback);
            
            // Remove after animation
            setTimeout(() => {
                feedback.remove();
            }, 3000);
        }
        
        function toggleBulkDropdown(category) {
            const dropdown = document.getElementById('bulk-' + category);
            
            if (!dropdown) return; // Safety check
            
            // Close all other dropdowns
            document.querySelectorAll('.bulk-dropdown-content').forEach(d => {
                if (d.id !== 'bulk-' + category) {
                    d.classList.remove('show');
                }
            });
            
            dropdown.classList.toggle('show');
        }
        
        function bulkScore(category, score) {
            const items = categoryItems[category];
            let changed = false;
            
            items.forEach(item => {
                // Only fill empty items
                if (scores[item] === undefined) {
                    setScore(item, score);
                    changed = true;
                }
            });
            
            // Close dropdown
            document.getElementById('bulk-' + category).classList.remove('show');
            
            if (changed) {
                showSaveFeedback();
            }
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.bulk-dropdown')) {
                document.querySelectorAll('.bulk-dropdown-content').forEach(d => {
                    d.classList.remove('show');
                });
            }
        });

        function saveNotes(category) {
            const textarea = document.getElementById('notes-' + category);
            if (textarea) {
                notes[category] = textarea.value;
                localStorage.setItem('dotNotes', JSON.stringify(notes));
                showSaveFeedback();
            }
        }
        
        function saveNames() {
            const studentName = document.getElementById('student-name');
            const observerName = document.getElementById('observer-name');
            
            if (studentName && observerName) {
                localStorage.setItem('dotStudentName', studentName.value);
                localStorage.setItem('dotObserverName', observerName.value);
                showSaveFeedback();
            }
        }

        function updateSuggestions() {
            const criteriaScores = {};
            
            for (const [item, score] of Object.entries(scores)) {
                // Skip NVT scores (0)
                if (score === 0) continue;
                
                const criteria = mapping[item] || [];
                criteria.forEach(crit => {
                    if (!criteriaScores[crit]) criteriaScores[crit] = [];
                    criteriaScores[crit].push(score);
                });
            }
            
            // Calculate averages
            const criteriaAverages = {};
            for (const [crit, scoreList] of Object.entries(criteriaScores)) {
                if (scoreList.length > 0) {
                    criteriaAverages[crit] = scoreList.reduce((a, b) => a + b, 0) / scoreList.length;
                }
            }
            
            // Group by role with detailed info
            const roles = {
                'vak': { 
                    name: 'Vakdidacticus', 
                    icon: '📚', 
                    color: 'from-green-500 to-emerald-600', 
                    criteria: [] 
                },
                'reg': { 
                    name: 'Regisseur', 
                    icon: '🎭', 
                    color: 'from-blue-500 to-cyan-600', 
                    criteria: [] 
                },
                'ped': { 
                    name: 'Pedagoog', 
                    icon: '🤝', 
                    color: 'from-pink-500 to-rose-600', 
                    criteria: [] 
                }
            };
            
            const criteriaInfo = {
                'vak-leerdoelen': { 
                    name: 'Leerdoelen', 
                    tips: {
                        verylow: [
                            'Begin met het opschrijven van wat leerlingen aan het eind moeten kunnen',
                            'Maak doelen concreet: niet "begrijpen van fotosynthese" maar "uitleggen hoe planten suiker maken"',
                            'Test je doel: kan je er een vraag over stellen?'
                        ],
                        low: [
                            'Formuleer SMART doelen (Specifiek, Meetbaar, Acceptabel, Realistisch, Tijdgebonden)',
                            'Check of doelen haalbaar zijn voor de groep',
                            'Communiceer doelen mondeling én schrijf ze op het bord'
                        ],
                        mid: [
                            'Maak lesdoelen toetsbaar en benoem de verwachte leeractiviteiten',
                            'Laat leerlingen begrijpen wat ze moeten doen om het doel te bereiken',
                            'Check tussentijds of leerlingen op koers liggen'
                        ],
                        high: [
                            'Differentieer doelen: houd rekening met verschillen tussen leerlingen',
                            'Laat leerlingen meedenken over hun eigen leerdoelen',
                            'Koppel doelen aan eerder geleerde én toekomstige leerstof'
                        ]
                    }
                },
                'vak-leerstof': { 
                    name: 'Leerstof', 
                    tips: {
                        verylow: [
                            'Begin elke les met: "Wat weten jullie hier al van?"',
                            'Gebruik plaatjes, video\'s of voorwerpen om leerstof tastbaar te maken',
                            'Leg uit waarom dit onderwerp belangrijk is'
                        ],
                        low: [
                            'Activeer voorkennis expliciet aan het begin',
                            'Leg verbanden tussen onderdelen uit',
                            'Gebruik concrete voorbeelden uit hun leefwereld'
                        ],
                        mid: [
                            'Zorg dat leerstof boeit: gebruik actuele voorbeelden',
                            'Leg verbanden met andere vakken waar mogelijk',
                            'Laat leerlingen zelf verbanden ontdekken'
                        ],
                        high: [
                            'Laat je enthousiasme voor de leerstof zien',
                            'Leg steeds nieuwe en verrassende verbanden',
                            'Stimuleer leerlingen om zelf verbanden te leggen tussen vak en dagelijks leven'
                        ]
                    }
                },
                'vak-leerproces': { 
                    name: 'Leerproces', 
                    tips: {
                        verylow: [
                            'Stop halverwege en vraag: "Wie snapt het tot nu toe?"',
                            'Laat leerlingen duimen omhoog/omlaag geven',
                            'Plan 5 minuten aan het eind voor vragen'
                        ],
                        low: [
                            'Check tussentijds of leerlingen het snappen',
                            'Pas je aanpak aan als het niet lukt',
                            'Bouw korte reflectiemomenten in'
                        ],
                        mid: [
                            'Signaleer vroeg wanneer leerlingen vastlopen',
                            'Maak reflectie onderdeel van je les (wat lukt/wat niet)',
                            'Evalueer na de les of leerdoelen behaald zijn'
                        ],
                        high: [
                            'Bouw activiteiten in die vroeg signaleren waar het dreigt mis te gaan',
                            'Pas snel én adequaat aan tijdens de les',
                            'Laat leerlingen hun eigen leerproces monitoren'
                        ]
                    }
                },
                'vak-werkvorm': { 
                    name: 'Werkvorm', 
                    tips: {
                        verylow: [
                            'Wissel klassikale uitleg af met zelfstandig werk',
                            'Probeer één nieuwe werkvorm deze week (bijv. denken-delen-uitwisselen)',
                            'Vraag collega\'s wat voor hen werkt'
                        ],
                        low: [
                            'Varieer je werkvormen (niet alleen klassikaal)',
                            'Match werkvorm bewust aan je leerdoel',
                            'Oefen nieuwe werkvormen eerst in kleine setting'
                        ],
                        mid: [
                            'Gebruik diverse werkvormen: gesprek, discussie, groepswerk, zelfstandig werk',
                            'Voer werkvormen uit zoals beoogd (volg je eigen plan)',
                            'Evalueer wat werkt en wat niet'
                        ],
                        high: [
                            'Bouw een breed repertoire op aan werkvormen',
                            'Wissel flexibel en snel van werkvorm als de situatie erom vraagt',
                            'Laat ICT functioneel meespelen waar mogelijk'
                        ]
                    }
                },
                'reg-sturen': { 
                    name: 'Sturen', 
                    tips: {
                        verylow: [
                            'Begin met stilte voordat je iets zegt',
                            'Geef één duidelijke instructie per keer',
                            'Maak visuele regels (pictogrammen op bord)'
                        ],
                        low: [
                            'Geef heldere, stapsgewijze instructies',
                            'Gebruik non-verbale signalen (blik, gebaar)',
                            'Wees consequent in je regels'
                        ],
                        mid: [
                            'Zorg dat leerlingen efficiënt aan het werk gaan',
                            'Voorkom ordeverstoring door goed te sturen',
                            'Geef leerlingen verantwoordelijkheid binnen kaders'
                        ],
                        high: [
                            'Anticipeer op potentiële problemen voordat ze ontstaan',
                            'Geef leerlingen meer verantwoordelijkheid voor klassenorde',
                            'Stuur subtiel en laat leerlingen actief meedenken'
                        ]
                    }
                },
                'reg-helpen': { 
                    name: 'Helpen', 
                    tips: {
                        verylow: [
                            'Loop rond tijdens zelfstandig werk',
                            'Vraag "Wat heb je al geprobeerd?" voordat je helpt',
                            'Help door hints te geven, niet door antwoorden te geven'
                        ],
                        low: [
                            'Stel open vragen i.p.v. direct antwoorden geven',
                            'Loop rond en signaleer wie hulp nodig heeft',
                            'Geef leerlingen denktijd voordat je helpt'
                        ],
                        mid: [
                            'Signaleer actief wanneer leerlingen hulp nodig hebben',
                            'Bied hulp voordat ze erom vragen',
                            'Varieer in je manier van helpen (individueel/klassikaal)'
                        ],
                        high: [
                            'Anticipeer op hulpbehoeften van leerlingen',
                            'Leer leerlingen om zelf hulp te vragen op het juiste moment',
                            'Maak leerlingen medeverantwoordelijk voor elkaar helpen'
                        ]
                    }
                },
                'reg-ruimte': { 
                    name: 'Ruimte geven', 
                    tips: {
                        verylow: [
                            'Stel elke les minstens 3 open vragen ("Waarom denk je dat?")',
                            'Reageer positief op elk antwoord: "Interessant idee!"',
                            'Laat leerlingen een keuze maken (welke opdracht eerst?)'
                        ],
                        low: [
                            'Stel open vragen die eigen inbreng uitlokken',
                            'Gebruik leerlingen-inbreng daadwerkelijk in je les',
                            'Laat leerlingen keuzes maken waar mogelijk'
                        ],
                        mid: [
                            'Waardeer inbreng expliciet ("goed punt!")',
                            'Bouw voort op wat leerlingen inbrengen',
                            'Laat leerlingen ook zelf nadenken over aanpak'
                        ],
                        high: [
                            'Stimuleer actief dat leerlingen eigen inbreng leveren',
                            'Benut hun inbreng om de les rijker te maken',
                            'Geef leerlingen echte keuzes in wat/hoe ze leren'
                        ]
                    }
                },
                'reg-normen': { 
                    name: 'Normen', 
                    tips: {
                        verylow: [
                            'Maak 3 simpele klassenregels en hang ze op',
                            'Spreek direct aan bij overtreding, zonder discussie',
                            'Blijf vriendelijk maar duidelijk'
                        ],
                        low: [
                            'Wees kristalhelder over verwachtingen',
                            'Spreek gedrag aan, niet de persoon',
                            'Blijf consistent in je reacties'
                        ],
                        mid: [
                            'Hanteer regels consequent maar zonder onnodige discussie',
                            'Zorg dat leerlingen jouw keuzes begrijpen',
                            'Voorkom escalatie door vroeg in te grijpen'
                        ],
                        high: [
                            'Maak leerlingen medeverantwoordelijk voor normen',
                            'Bespreek waarom normen belangrijk zijn',
                            'Laat de groep zelf normen bewaken'
                        ]
                    }
                },
                'ped-veilig': { 
                    name: 'Veilig klimaat', 
                    tips: {
                        verylow: [
                            'Leer alle namen binnen 2 weken',
                            'Begroet leerlingen persoonlijk bij binnenkomst',
                            'Reageer op elk antwoord met waardering'
                        ],
                        low: [
                            'Toon persoonlijke interesse in elke leerling',
                            'Waardeer alle antwoorden (ook foute)',
                            'Spreek pestgedrag direct aan'
                        ],
                        mid: [
                            'Ga adequaat om met leerlingen die veiligheid bedreigen',
                            'Zorg voor ordelijke werkomstandigheden',
                            'Hanteer afgesproken regels met succes'
                        ],
                        high: [
                            'Maak de groep medeverantwoordelijk voor veilig klimaat',
                            'Laat leerlingen elkaar respectvol aanspreken',
                            'Creëer een sfeer waarin fouten maken mag'
                        ]
                    }
                },
                'ped-verschillen': { 
                    name: 'Verschillen', 
                    tips: {
                        verylow: [
                            'Maak één opdracht in 3 moeilijkheidsgraden',
                            'Geef snelle leerlingen een extra uitdaging',
                            'Geef trage leerlingen meer tijd of minder opdrachten'
                        ],
                        low: [
                            'Differentieer in niveau, tempo of inhoud',
                            'Geef keuzemogelijkheden waar mogelijk',
                            'Gebruik verschillen als leerbron'
                        ],
                        mid: [
                            'Pas je aanpak bewust aan op verschillen',
                            'Maak gebruik van info uit leerlingvolgsysteem',
                            'Differentieer in instructie (3+ niveaus)'
                        ],
                        high: [
                            'Benut verschillen actief om leren van alle leerlingen te bevorderen',
                            'Laat leerlingen van elkaar leren',
                            'Maak leerlingen bewust van hun eigen leerstijl'
                        ]
                    }
                },
                'ped-waarden': { 
                    name: 'Waardeontwikkeling', 
                    tips: {
                        verylow: [
                            'Laat leerlingen hun mening geven over lesonderwerpen',
                            'Reageer altijd respectvol op elke mening',
                            'Maak duidelijk dat verschillende meningen welkom zijn'
                        ],
                        low: [
                            'Stimuleer leerlingen om hun mening te uiten in discussies',
                            'Leer leerlingen naar elkaar luisteren zonder te onderbreken',
                            'Bespreek waarom verschillende meningen waardevol zijn'
                        ],
                        mid: [
                            'Organiseer regelmatig discussies over ethische/maatschappelijke vraagstukken',
                            'Leer leerlingen hun mening onderbouwen met argumenten',
                            'Laat leerlingen respectvol reageren op elkaars standpunten'
                        ],
                        high: [
                            'Creëer een cultuur waarin leerlingen zelfstandig ethische dilemma\'s bespreken',
                            'Laat leerlingen hun eigen waarden onderzoeken en ontwikkelen',
                            'Stimuleer leerlingen kritisch na te denken over maatschappelijke normen'
                        ]
                    }
                },
                'ped-identiteit': { 
                    name: 'Identiteitsontwikkeling', 
                    tips: {
                        verylow: [
                            'Toon interesse in de achtergrond van leerlingen',
                            'Geef ruimte voor persoonlijke verhalen',
                            'Wees je bewust dat puberteit invloed heeft op gedrag'
                        ],
                        low: [
                            'Herken dat identiteitsvragen gedrag kunnen beïnvloeden',
                            'Bespreek identiteit als ontwikkelingsthema',
                            'Wees geduldig met "zoekgedrag" van adolescenten'
                        ],
                        mid: [
                            'Begrijp hoe culturele achtergrond leerstijl kan beïnvloeden',
                            'Herken signalen van identiteitsonzekerheid',
                            'Pas je aanpak aan op ontwikkelingsfase van leerlingen'
                        ],
                        high: [
                            'Integreer identiteitsontwikkeling in je pedagogisch handelen',
                            'Help leerlingen hun identiteit positief te ontwikkelen',
                            'Zie hoe identiteit, motivatie en leren samenhangen'
                        ]
                    }
                }
            };
            
            // Categorize criteria by role
            for (const [crit, avg] of Object.entries(criteriaAverages)) {
                const role = crit.split('-')[0];
                if (roles[role] && criteriaInfo[crit]) {
                    roles[role].criteria.push({
                        id: crit,
                        name: criteriaInfo[crit].name,
                        avg: avg,
                        tips: criteriaInfo[crit].tips
                    });
                }
            }
            
            // Generate HTML
            let html = '';
            
            if (Object.keys(criteriaAverages).length === 0) {
                html = '<div class="text-center text-gray-500 py-12"><div class="text-6xl mb-4">📊</div><p>Score eerste DOT-stellingen →</p></div>';
            } else {
                // Overall summary
                const totalScores = Object.values(criteriaAverages);
                const overallAvg = totalScores.reduce((a, b) => a + b, 0) / totalScores.length;
                let overallColor = '';
                if (overallAvg < 1.5) overallColor = 'from-red-500 to-red-600';
                else if (overallAvg < 2.5) overallColor = 'from-orange-500 to-orange-600';
                else if (overallAvg < 3.5) overallColor = 'from-green-500 to-green-600';
                else overallColor = 'from-blue-500 to-blue-600';
                
                html += `
                    <div class="bg-gradient-to-r ${overallColor} text-white p-5 rounded-xl mb-4 shadow-lg">
                        <div class="text-center">
                            <div class="text-4xl font-bold mb-1">${overallAvg.toFixed(1)}</div>
                            <div class="text-sm opacity-90">Gemiddeld ICLON niveau</div>
                        </div>
                    </div>
                `;
                
                // Roles
                for (const [roleKey, role] of Object.entries(roles)) {
                    if (role.criteria.length === 0) continue;
                    
                    const roleAvg = role.criteria.reduce((sum, c) => sum + c.avg, 0) / role.criteria.length;
                    
                    html += `
                        <div class="mb-4">
                            <div class="bg-gradient-to-r ${role.color} p-4 rounded-xl mb-3 shadow-md">
                                <div class="flex items-center justify-between text-white">
                                    <div class="flex items-center gap-2">
                                        <span class="text-2xl">${role.icon}</span>
                                        <h3 class="text-lg font-bold">${role.name}</h3>
                                    </div>
                                    <div class="text-2xl font-bold">${roleAvg.toFixed(1)}</div>
                                </div>
                            </div>
                            <div class="space-y-2">
                    `;
                    
                    // Sort criteria by score (lowest first for attention)
                    role.criteria.sort((a, b) => a.avg - b.avg);
                    
                    for (const crit of role.criteria) {
                        let borderColor = '';
                        let bgColor = '';
                        let tipLevel = 'low';
                        let tipLabel = '';
                        
                        if (crit.avg < 1.5) {
                            borderColor = 'border-red-400';
                            bgColor = 'bg-red-50';
                            tipLevel = 'verylow';
                            tipLabel = '🔴 Urgent: Absolute basis';
                        } else if (crit.avg < 2.5) {
                            borderColor = 'border-orange-400';
                            bgColor = 'bg-orange-50';
                            tipLevel = 'low';
                            tipLabel = '💡 Focus: Naar niveau 3';
                        } else if (crit.avg < 3.5) {
                            borderColor = 'border-green-400';
                            bgColor = 'bg-green-50';
                            tipLevel = 'mid';
                            tipLabel = '⭐ Volgende stap: Naar niveau 4';
                        } else {
                            borderColor = 'border-blue-400';
                            bgColor = 'bg-blue-50';
                            tipLevel = 'high';
                            tipLabel = '🚀 Excelleren: Blijf groeien';
                        }
                        
                        let niveauClass = '';
                        if (crit.avg < 1.5) niveauClass = 'niveau-1';
                        else if (crit.avg < 2.5) niveauClass = 'niveau-2';
                        else if (crit.avg < 3.5) niveauClass = 'niveau-3';
                        else niveauClass = 'niveau-4';
                        
                        const tipsList = crit.tips[tipLevel] || crit.tips.low;
                        
                        html += `
                            <div class="${bgColor} p-3 rounded-lg border-l-4 ${borderColor}">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="font-semibold text-gray-800 text-sm">${crit.name}</span>
                                    <span class="niveau-badge ${niveauClass}">${crit.avg.toFixed(1)}</span>
                                </div>
                                <div class="mt-2 pt-2 border-t border-gray-200">
                                    <div class="text-xs font-semibold text-gray-600 mb-1">${tipLabel}</div>
                                    <ul class="text-xs text-gray-600 space-y-0.5 list-disc list-inside">
                                        ${tipsList.map(tip => `<li>${tip}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        `;
                    }
                    
                    html += `
                            </div>
                        </div>
                    `;
                }
                
                // Legend
                html += `
                    <div class="mt-6 p-4 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl border border-indigo-100">
                        <h4 class="font-bold mb-2 text-indigo-900 text-sm">📊 Niveau-vertaling</h4>
                        <div class="grid grid-cols-2 gap-2 text-xs text-gray-700">
                            <div class="flex items-center gap-1">
                                <span class="niveau-badge niveau-1 text-xs">1</span>
                                <span>Niet</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <span class="niveau-badge niveau-2 text-xs">2</span>
                                <span>Matig</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <span class="niveau-badge niveau-3 text-xs">3</span>
                                <span>Gezien</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <span class="niveau-badge niveau-4 text-xs">4</span>
                                <span>Goed</span>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 italic">Scores onder 3: focus op verbetering</p>
                    </div>
                    
                    <div class="mt-4 p-4 bg-amber-50 rounded-xl border border-amber-200">
                        <h4 class="font-bold mb-2 text-amber-900 text-sm flex items-center gap-2">
                            <span>⚠️</span>
                            <span>Let op</span>
                        </h4>
                        <div class="text-xs text-gray-700 space-y-1">
                            <p>• Dit is een <strong>indicatie</strong> op basis van observeerbaar DOT-gedrag</p>
                            <p>• De opleiding kijkt <strong>breder</strong> bij de uiteindelijke beoordeling</p>
                            <p>• <strong>Argumentatie</strong> en theoretische onderbouwing (onderdeel van alle 3 rollen) worden beoordeeld via portfolio, lesvoorbereidingen en gesprekken</p>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('suggestions-content').innerHTML = html;
        }

        function resetAll() {
            if (!confirm('Weet je zeker dat je alle scores, aantekeningen én namen wilt verwijderen?')) {
                return;
            }
            
            for (const key in scores) delete scores[key];
            for (const key in notes) delete notes[key];
            
            localStorage.removeItem('dotScores');
            localStorage.removeItem('dotNotes');
            localStorage.removeItem('dotStudentName');
            localStorage.removeItem('dotObserverName');
            
            document.querySelectorAll('.dot-score-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.notes-field').forEach(textarea => textarea.value = '');
            
            const studentNameInput = document.getElementById('student-name');
            const observerNameInput = document.getElementById('observer-name');
            if (studentNameInput) studentNameInput.value = '';
            if (observerNameInput) observerNameInput.value = '';
            
            updateCategoryAverages();
            updateSuggestions();
        }

        function exportResults() {
            if (Object.keys(scores).length === 0) {
                alert('Score eerst enkele DOT-stellingen.');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            let y = 20;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 20;
            const lineHeight = 7;
            
            // Helper function to add new page if needed
            function checkPageBreak(neededSpace = 10) {
                if (y + neededSpace > pageHeight - margin) {
                    doc.addPage();
                    y = 20;
                    return true;
                }
                return false;
            }
            
            // Title
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('DOT → ICLON Beoordelingsoverzicht', margin, y);
            y += 10;
            
            // Date
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            const today = new Date().toLocaleDateString('nl-NL', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            doc.text(`Datum: ${today}`, margin, y);
            y += 6;
            
            // Names
            const studentName = document.getElementById('student-name');
            const observerName = document.getElementById('observer-name');
            
            if (studentName && studentName.value.trim()) {
                doc.text(`Student: ${studentName.value}`, margin, y);
                y += 6;
            }
            if (observerName && observerName.value.trim()) {
                doc.text(`Observator: ${observerName.value}`, margin, y);
                y += 6;
            }
            
            y += 6;
            
            // Calculate category averages
            const catAvgs = {};
            for (const cat in categoryItems) {
                const items = categoryItems[cat];
                const catScores = items.map(item => scores[item] || 0).filter(s => s > 0);
                if (catScores.length > 0) {
                    catAvgs[cat] = catScores.reduce((a, b) => a + b, 0) / catScores.length;
                }
            }
            
            // DOT Scores per category
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('DOT Scores', margin, y);
            y += 8;
            
            for (const [cat, catName] of Object.entries(categoryNames)) {
                const items = categoryItems[cat] || [];
                const hasScores = items.some(item => scores[item] !== undefined);
                
                if (!hasScores) continue;
                
                checkPageBreak(30);
                
                // Category header with average and color
                const avg = catAvgs[cat];
                let headerColor;
                if (avg) {
                    if (avg < 1.5) {
                        headerColor = [220, 38, 38]; // red
                    } else if (avg < 2.5) {
                        headerColor = [249, 115, 22]; // orange
                    } else if (avg < 3.5) {
                        headerColor = [34, 197, 94]; // green
                    } else {
                        headerColor = [59, 130, 246]; // blue
                    }
                } else {
                    headerColor = [156, 163, 175]; // gray
                }
                
                // Colored box for category header
                doc.setFillColor(headerColor[0], headerColor[1], headerColor[2]);
                doc.setDrawColor(headerColor[0], headerColor[1], headerColor[2]);
                doc.roundedRect(margin, y, 170, 7, 1, 1, 'FD');
                
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                const avgText = avg ? ` (Gem: ${avg.toFixed(1)})` : '';
                doc.text(`${catName}${avgText}`, margin + 2, y + 5);
                
                doc.setTextColor(0, 0, 0);
                y += 9;
                
                // Scores with color indicators
                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                items.forEach(item => {
                    if (scores[item] !== undefined) {
                        checkPageBreak(5);
                        const score = scores[item];
                        const scoreText = score === 0 ? 'NVT' : score;
                        const label = itemLabels[item];
                        
                        // Color dot based on score
                        if (score > 0) {
                            let color;
                            if (score < 1.5) {
                                color = [220, 38, 38]; // red
                            } else if (score < 2.5) {
                                color = [249, 115, 22]; // orange
                            } else if (score < 3.5) {
                                color = [34, 197, 94]; // green
                            } else {
                                color = [59, 130, 246]; // blue
                            }
                            doc.setFillColor(color[0], color[1], color[2]);
                            doc.circle(margin + 3, y - 1, 1, 'F');
                        }
                        
                        doc.setTextColor(0, 0, 0);
                        doc.text(`  ${label}: ${scoreText}`, margin + 6, y);
                        y += 5;
                    }
                });
                
                // Notes
                if (notes[cat] && notes[cat].trim()) {
                    checkPageBreak(15);
                    doc.setFont(undefined, 'italic');
                    doc.text('  Aantekeningen:', margin, y);
                    y += 5;
                    const noteLines = doc.splitTextToSize(notes[cat], 170);
                    noteLines.forEach(line => {
                        checkPageBreak(5);
                        doc.text(`  ${line}`, margin, y);
                        y += 5;
                    });
                }
                
                y += 5;
            }
            
            // ICLON Mapping
            checkPageBreak(30);
            y += 5;
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('ICLON Niveau-indicaties', margin, y);
            y += 8;
            
            // Calculate ICLON criteria
            const criteriaScores = {};
            for (const [item, score] of Object.entries(scores)) {
                if (score === 0) continue;
                const criteria = mapping[item] || [];
                criteria.forEach(crit => {
                    if (!criteriaScores[crit]) criteriaScores[crit] = [];
                    criteriaScores[crit].push(score);
                });
            }
            
            const criteriaAverages = {};
            for (const [crit, scoreList] of Object.entries(criteriaScores)) {
                if (scoreList.length > 0) {
                    criteriaAverages[crit] = scoreList.reduce((a, b) => a + b, 0) / scoreList.length;
                }
            }
            
            // Group by role
            const roles = {
                'vak': { name: 'Vakdidacticus', criteria: [] },
                'reg': { name: 'Regisseur', criteria: [] },
                'ped': { name: 'Pedagoog', criteria: [] }
            };
            
            const criteriaInfo = {
                'vak-leerdoelen': {
                    name: 'Leerdoelen',
                    tips: {
                        verylow: [
                            'Begin met het opschrijven van wat leerlingen aan het eind moeten kunnen',
                            'Maak doelen concreet: niet "begrijpen van fotosynthese" maar "uitleggen hoe planten suiker maken"',
                            'Test je doel: kan je er een vraag over stellen?'
                        ],
                        low: [
                            'Formuleer SMART doelen (Specifiek, Meetbaar, Acceptabel, Realistisch, Tijdgebonden)',
                            'Check of doelen haalbaar zijn voor de groep',
                            'Communiceer doelen mondeling én schrijf ze op het bord'
                        ],
                        mid: [
                            'Maak lesdoelen toetsbaar en benoem de verwachte leeractiviteiten',
                            'Laat leerlingen begrijpen wat ze moeten doen om het doel te bereiken',
                            'Check tussentijds of leerlingen op koers liggen'
                        ],
                        high: [
                            'Differentieer doelen: houd rekening met verschillen tussen leerlingen',
                            'Laat leerlingen meedenken over hun eigen leerdoelen',
                            'Koppel doelen aan eerder geleerde én toekomstige leerstof'
                        ]
                    }
                },
                'vak-leerstof': {
                    name: 'Leerstof',
                    tips: {
                        verylow: [
                            'Begin elke les met: "Wat weten jullie hier al van?"',
                            'Gebruik plaatjes, video\'s of voorwerpen om leerstof tastbaar te maken',
                            'Leg uit waarom dit onderwerp belangrijk is'
                        ],
                        low: [
                            'Activeer voorkennis expliciet aan het begin',
                            'Leg verbanden tussen onderdelen uit',
                            'Gebruik concrete voorbeelden uit hun leefwereld'
                        ],
                        mid: [
                            'Zorg dat leerstof boeit: gebruik actuele voorbeelden',
                            'Leg verbanden met andere vakken waar mogelijk',
                            'Laat leerlingen zelf verbanden ontdekken'
                        ],
                        high: [
                            'Laat je enthousiasme voor de leerstof zien',
                            'Leg steeds nieuwe en verrassende verbanden',
                            'Stimuleer leerlingen om zelf verbanden te leggen tussen vak en dagelijks leven'
                        ]
                    }
                },
                'vak-leerproces': {
                    name: 'Leerproces',
                    tips: {
                        verylow: [
                            'Stop halverwege en vraag: "Wie snapt het tot nu toe?"',
                            'Laat leerlingen duimen omhoog/omlaag geven',
                            'Plan 5 minuten aan het eind voor vragen'
                        ],
                        low: [
                            'Check tussentijds of leerlingen het snappen',
                            'Pas je aanpak aan als het niet lukt',
                            'Bouw korte reflectiemomenten in'
                        ],
                        mid: [
                            'Signaleer vroeg wanneer leerlingen vastlopen',
                            'Maak reflectie onderdeel van je les (wat lukt/wat niet)',
                            'Evalueer na de les of leerdoelen behaald zijn'
                        ],
                        high: [
                            'Bouw activiteiten in die vroeg signaleren waar het dreigt mis te gaan',
                            'Pas snel én adequaat aan tijdens de les',
                            'Laat leerlingen hun eigen leerproces monitoren'
                        ]
                    }
                },
                'vak-werkvorm': {
                    name: 'Werkvorm',
                    tips: {
                        verylow: [
                            'Wissel klassikale uitleg af met zelfstandig werk',
                            'Probeer één nieuwe werkvorm deze week (bijv. denken-delen-uitwisselen)',
                            'Vraag collega\'s wat voor hen werkt'
                        ],
                        low: [
                            'Varieer je werkvormen (niet alleen klassikaal)',
                            'Match werkvorm bewust aan je leerdoel',
                            'Oefen nieuwe werkvormen eerst in kleine setting'
                        ],
                        mid: [
                            'Gebruik diverse werkvormen: gesprek, discussie, groepswerk, zelfstandig werk',
                            'Voer werkvormen uit zoals beoogd (volg je eigen plan)',
                            'Evalueer wat werkt en wat niet'
                        ],
                        high: [
                            'Bouw een breed repertoire op aan werkvormen',
                            'Wissel flexibel en snel van werkvorm als de situatie erom vraagt',
                            'Laat ICT functioneel meespelen waar mogelijk'
                        ]
                    }
                },
                'reg-sturen': {
                    name: 'Sturen',
                    tips: {
                        verylow: [
                            'Begin met stilte voordat je iets zegt',
                            'Geef één duidelijke instructie per keer',
                            'Maak visuele regels (pictogrammen op bord)'
                        ],
                        low: [
                            'Geef heldere, stapsgewijze instructies',
                            'Gebruik non-verbale signalen (blik, gebaar)',
                            'Wees consequent in je regels'
                        ],
                        mid: [
                            'Zorg dat leerlingen efficiënt aan het werk gaan',
                            'Voorkom ordeverstoring door goed te sturen',
                            'Geef leerlingen verantwoordelijkheid binnen kaders'
                        ],
                        high: [
                            'Anticipeer op potentiële problemen voordat ze ontstaan',
                            'Geef leerlingen meer verantwoordelijkheid voor klassenorde',
                            'Stuur subtiel en laat leerlingen actief meedenken'
                        ]
                    }
                },
                'reg-helpen': {
                    name: 'Helpen',
                    tips: {
                        verylow: [
                            'Loop rond tijdens zelfstandig werk',
                            'Vraag "Wat heb je al geprobeerd?" voordat je helpt',
                            'Help door hints te geven, niet door antwoorden te geven'
                        ],
                        low: [
                            'Stel open vragen i.p.v. direct antwoorden geven',
                            'Loop rond en signaleer wie hulp nodig heeft',
                            'Geef leerlingen denktijd voordat je helpt'
                        ],
                        mid: [
                            'Signaleer actief wanneer leerlingen hulp nodig hebben',
                            'Bied hulp voordat ze erom vragen',
                            'Varieer in je manier van helpen (individueel/klassikaal)'
                        ],
                        high: [
                            'Anticipeer op hulpbehoeften van leerlingen',
                            'Leer leerlingen om zelf hulp te vragen op het juiste moment',
                            'Maak leerlingen medeverantwoordelijk voor elkaar helpen'
                        ]
                    }
                },
                'reg-ruimte': {
                    name: 'Ruimte geven',
                    tips: {
                        verylow: [
                            'Stel elke les minstens 3 open vragen ("Waarom denk je dat?")',
                            'Reageer positief op elk antwoord: "Interessant idee!"',
                            'Laat leerlingen een keuze maken (welke opdracht eerst?)'
                        ],
                        low: [
                            'Stel open vragen die eigen inbreng uitlokken',
                            'Gebruik leerlingen-inbreng daadwerkelijk in je les',
                            'Laat leerlingen keuzes maken waar mogelijk'
                        ],
                        mid: [
                            'Waardeer inbreng expliciet ("goed punt!")',
                            'Bouw voort op wat leerlingen inbrengen',
                            'Laat leerlingen ook zelf nadenken over aanpak'
                        ],
                        high: [
                            'Stimuleer actief dat leerlingen eigen inbreng leveren',
                            'Benut hun inbreng om de les rijker te maken',
                            'Geef leerlingen echte keuzes in wat/hoe ze leren'
                        ]
                    }
                },
                'reg-normen': {
                    name: 'Normen handhaven',
                    tips: {
                        verylow: [
                            'Maak 3 simpele klassenregels en hang ze op',
                            'Spreek direct aan bij overtreding, zonder discussie',
                            'Blijf vriendelijk maar duidelijk'
                        ],
                        low: [
                            'Wees kristalhelder over verwachtingen',
                            'Spreek gedrag aan, niet de persoon',
                            'Blijf consistent in je reacties'
                        ],
                        mid: [
                            'Hanteer regels consequent maar zonder onnodige discussie',
                            'Zorg dat leerlingen jouw keuzes begrijpen',
                            'Voorkom escalatie door vroeg in te grijpen'
                        ],
                        high: [
                            'Maak leerlingen medeverantwoordelijk voor normen',
                            'Bespreek waarom normen belangrijk zijn',
                            'Laat de groep zelf normen bewaken'
                        ]
                    }
                },
                'ped-veilig': {
                    name: 'Veilig klimaat',
                    tips: {
                        verylow: [
                            'Leer alle namen binnen 2 weken',
                            'Begroet leerlingen persoonlijk bij binnenkomst',
                            'Reageer op elk antwoord met waardering'
                        ],
                        low: [
                            'Toon persoonlijke interesse in elke leerling',
                            'Waardeer alle antwoorden (ook foute)',
                            'Spreek pestgedrag direct aan'
                        ],
                        mid: [
                            'Ga adequaat om met leerlingen die veiligheid bedreigen',
                            'Zorg voor ordelijke werkomstandigheden',
                            'Hanteer afgesproken regels met succes'
                        ],
                        high: [
                            'Maak de groep medeverantwoordelijk voor veilig klimaat',
                            'Laat leerlingen elkaar respectvol aanspreken',
                            'Creëer een sfeer waarin fouten maken mag'
                        ]
                    }
                },
                'ped-verschillen': {
                    name: 'Omgaan met verschillen',
                    tips: {
                        verylow: [
                            'Maak één opdracht in 3 moeilijkheidsgraden',
                            'Geef snelle leerlingen een extra uitdaging',
                            'Geef trage leerlingen meer tijd of minder opdrachten'
                        ],
                        low: [
                            'Differentieer in niveau, tempo of inhoud',
                            'Geef keuzemogelijkheden waar mogelijk',
                            'Gebruik verschillen als leerbron'
                        ],
                        mid: [
                            'Pas je aanpak bewust aan op verschillen',
                            'Maak gebruik van info uit leerlingvolgsysteem',
                            'Differentieer in instructie (3+ niveaus)'
                        ],
                        high: [
                            'Benut verschillen actief om leren van alle leerlingen te bevorderen',
                            'Laat leerlingen van elkaar leren',
                            'Maak leerlingen bewust van hun eigen leerstijl'
                        ]
                    }
                },
                'ped-waarden': {
                    name: 'Waardeontwikkeling',
                    tips: {
                        verylow: [
                            'Laat leerlingen hun mening geven over lesonderwerpen',
                            'Reageer altijd respectvol op elke mening',
                            'Maak duidelijk dat verschillende meningen welkom zijn'
                        ],
                        low: [
                            'Stimuleer leerlingen om hun mening te uiten in discussies',
                            'Leer leerlingen naar elkaar luisteren zonder te onderbreken',
                            'Bespreek waarom verschillende meningen waardevol zijn'
                        ],
                        mid: [
                            'Organiseer regelmatig discussies over ethische/maatschappelijke vraagstukken',
                            'Leer leerlingen hun mening onderbouwen met argumenten',
                            'Laat leerlingen respectvol reageren op elkaars standpunten'
                        ],
                        high: [
                            'Creëer een cultuur waarin leerlingen zelfstandig ethische dilemma\'s bespreken',
                            'Laat leerlingen hun eigen waarden onderzoeken en ontwikkelen',
                            'Stimuleer leerlingen kritisch na te denken over maatschappelijke normen'
                        ]
                    }
                },
                'ped-identiteit': {
                    name: 'Identiteitsontwikkeling',
                    tips: {
                        verylow: [
                            'Toon interesse in de achtergrond van leerlingen',
                            'Geef ruimte voor persoonlijke verhalen',
                            'Wees je bewust dat puberteit invloed heeft op gedrag'
                        ],
                        low: [
                            'Herken dat identiteitsvragen gedrag kunnen beïnvloeden',
                            'Bespreek identiteit als ontwikkelingsthema',
                            'Wees geduldig met "zoekgedrag" van adolescenten'
                        ],
                        mid: [
                            'Begrijp hoe culturele achtergrond leerstijl kan beïnvloeden',
                            'Herken signalen van identiteitsonzekerheid',
                            'Pas je aanpak aan op ontwikkelingsfase van leerlingen'
                        ],
                        high: [
                            'Integreer identiteitsontwikkeling in je pedagogisch handelen',
                            'Help leerlingen hun identiteit positief te ontwikkelen',
                            'Zie hoe identiteit, motivatie en leren samenhangen'
                        ]
                    }
                }
            };
            
            for (const [crit, avg] of Object.entries(criteriaAverages)) {
                const role = crit.split('-')[0];
                if (roles[role]) {
                    roles[role].criteria.push({
                        name: criteriaInfo[crit].name,
                        avg: avg,
                        key: crit
                    });
                }
            }
            
            // Overall average
            const totalScores = Object.values(criteriaAverages);
            if (totalScores.length > 0) {
                const overallAvg = totalScores.reduce((a, b) => a + b, 0) / totalScores.length;
                doc.setFontSize(11);
                doc.setFont(undefined, 'bold');
                doc.text(`Totaal gemiddeld ICLON niveau: ${overallAvg.toFixed(1)}`, margin, y);
                y += 10;
            }
            
            // Per role with colors and tips
            for (const [roleKey, role] of Object.entries(roles)) {
                if (role.criteria.length === 0) continue;
                
                checkPageBreak(20);
                
                const roleAvg = role.criteria.reduce((sum, c) => sum + c.avg, 0) / role.criteria.length;
                
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text(`${role.name} (Gem: ${roleAvg.toFixed(1)})`, margin, y);
                y += 8;
                
                // Sort by score (lowest first)
                role.criteria.sort((a, b) => a.avg - b.avg);
                
                role.criteria.forEach(crit => {
                    checkPageBreak(40);
                    
                    // Determine color based on score
                    let color, tipLevel, tipLabel;
                    if (crit.avg < 1.5) {
                        color = [220, 38, 38]; // red
                        tipLevel = 'verylow';
                        tipLabel = 'Urgent: Absolute basis';
                    } else if (crit.avg < 2.5) {
                        color = [249, 115, 22]; // orange
                        tipLevel = 'low';
                        tipLabel = 'Focus: Naar niveau 3';
                    } else if (crit.avg < 3.5) {
                        color = [34, 197, 94]; // green
                        tipLevel = 'mid';
                        tipLabel = 'Volgende stap: Naar niveau 4';
                    } else {
                        color = [59, 130, 246]; // blue
                        tipLevel = 'high';
                        tipLabel = 'Excelleren: Blijf groeien';
                    }
                    
                    // Colored header box
                    doc.setFillColor(color[0], color[1], color[2]);
                    doc.setDrawColor(color[0], color[1], color[2]);
                    doc.roundedRect(margin, y, 170, 6, 1, 1, 'FD');
                    
                    doc.setTextColor(255, 255, 255);
                    doc.setFontSize(9);
                    doc.setFont(undefined, 'bold');
                    const niveau = Math.round(crit.avg);
                    doc.text(`${crit.name}: Niveau ${niveau} (${crit.avg.toFixed(2)})`, margin + 2, y + 4);
                    
                    y += 8;
                    
                    // Tips section
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(8);
                    doc.setFont(undefined, 'italic');
                    doc.text(tipLabel, margin + 2, y);
                    y += 4;
                    
                    // Get tips for this criterion using the key
                    const critKey = crit.key; // Use the key we stored
                    
                    if (critKey && criteriaInfo[critKey] && criteriaInfo[critKey].tips[tipLevel]) {
                        doc.setFont(undefined, 'normal');
                        doc.setFontSize(8);
                        
                        criteriaInfo[critKey].tips[tipLevel].forEach((tip, idx) => {
                            checkPageBreak(4);
                            const tipLines = doc.splitTextToSize(`  • ${tip}`, 165);
                            tipLines.forEach(line => {
                                checkPageBreak(4);
                                doc.text(line, margin + 2, y);
                                y += 3.5;
                            });
                        });
                    }
                    
                    y += 3;
                });
                
                y += 5;
            }
            
            // Legend
            checkPageBreak(30);
            y += 5;
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            doc.setTextColor(0, 0, 0);
            doc.text('Niveau-vertaling:', margin, y);
            y += 6;
            
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            
            // Color legend
            const legendItems = [
                { text: 'Niveau 1: Niet gezien', color: [220, 38, 38] },
                { text: 'Niveau 2: Matig', color: [249, 115, 22] },
                { text: 'Niveau 3: Gezien', color: [34, 197, 94] },
                { text: 'Niveau 4: Goed', color: [59, 130, 246] }
            ];
            
            legendItems.forEach(item => {
                checkPageBreak(5);
                doc.setFillColor(item.color[0], item.color[1], item.color[2]);
                doc.circle(margin + 2, y - 1, 1.5, 'F');
                doc.text(item.text, margin + 6, y);
                y += 5;
            });
            y += 8;
            
            // Disclaimer section
            checkPageBreak(20);
            doc.setFontSize(9);
            doc.setFont(undefined, 'bold');
            doc.text('Let op:', margin, y);
            y += 5;
            
            doc.setFontSize(8);
            doc.setFont(undefined, 'italic');
            doc.text('• Dit is een indicatie op basis van observeerbaar DOT-gedrag in de les.', margin, y);
            y += 4;
            doc.text('• De opleiding kijkt breder bij de uiteindelijke beoordeling.', margin, y);
            y += 4;
            doc.text('• Argumentatie en theoretische onderbouwing (onderdeel van alle 3 rollen)', margin, y);
            y += 3.5;
            doc.text('  worden beoordeeld via portfolio, lesvoorbereidingen en gesprekken.', margin, y);
            
            // Save
            doc.save(`DOT-ICLON-beoordeling-${new Date().toISOString().split('T')[0]}.pdf`);
        }

        // Load saved data on page load
        loadSavedData();
        
        // Scroll to top button
        const scrollBtn = document.getElementById('scroll-to-top');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollBtn.classList.add('visible');
            } else {
                scrollBtn.classList.remove('visible');
            }
        });
        
        // Quick nav highlighting
        const categories = ['km', 'cl', 'iw', 'ef', 'diff', 'ph'];
        window.addEventListener('scroll', () => {
            let current = '';
            categories.forEach(cat => {
                const section = document.getElementById('category-' + cat);
                if (section) {
                    const rect = section.getBoundingClientRect();
                    if (rect.top <= 150 && rect.bottom >= 150) {
                        current = cat;
                    }
                }
            });
            
            document.querySelectorAll('.quick-nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.category === current) {
                    item.classList.add('active');
                }
            });
        });
    </script>
    
    <!-- Scroll to top button -->
    <div id="scroll-to-top" class="scroll-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        ↑
    </div>
    
    <!-- Quick navigation -->
    <div class="quick-nav show">
        <div class="quick-nav-item" style="background: linear-gradient(135deg, #3b82f6, #06b6d4)" data-category="km" onclick="const el = document.getElementById('category-km'); if(el && el.parentElement) el.parentElement.scrollIntoView({behavior: 'smooth', block: 'start'})" title="Klassenmanagement">
            📋
        </div>
        <div class="quick-nav-item" style="background: linear-gradient(135deg, #10b981, #059669)" data-category="cl" onclick="const el = document.getElementById('category-cl'); if(el && el.parentElement) el.parentElement.scrollIntoView({behavior: 'smooth', block: 'start'})" title="Consistente Lesopbouw">
            📚
        </div>
        <div class="quick-nav-item" style="background: linear-gradient(135deg, #a855f7, #ec4899)" data-category="iw" onclick="const el = document.getElementById('category-iw'); if(el && el.parentElement) el.parentElement.scrollIntoView({behavior: 'smooth', block: 'start'})" title="Interactief Werken">
            💡
        </div>
        <div class="quick-nav-item" style="background: linear-gradient(135deg, #f97316, #dc2626)" data-category="ef" onclick="const el = document.getElementById('category-ef'); if(el && el.parentElement) el.parentElement.scrollIntoView({behavior: 'smooth', block: 'start'})" title="Effectieve Feedback">
            💬
        </div>
        <div class="quick-nav-item" style="background: linear-gradient(135deg, #eab308, #f59e0b)" data-category="diff" onclick="const el = document.getElementById('category-diff'); if(el && el.parentElement) el.parentElement.scrollIntoView({behavior: 'smooth', block: 'start'})" title="Differentiatie">
            🎯
        </div>
        <div class="quick-nav-item" style="background: linear-gradient(135deg, #14b8a6, #06b6d4)" data-category="ph" onclick="const el = document.getElementById('category-ph'); if(el && el.parentElement) el.parentElement.scrollIntoView({behavior: 'smooth', block: 'start'})" title="Pedagogisch Handelen">
            🤝
        </div>
    </div>
    
    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
